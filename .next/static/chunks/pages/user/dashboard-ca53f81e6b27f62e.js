(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[894],{7005:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/dashboard",function(){return c(3006)}])},2077:function(a,b,c){"use strict";c.d(b,{Z:function(){return e}});var d=c(5893);function e(a){var b=a.text,c=a.customCSS,e=a.icon,f=a.disabled,g=a.setOpenTrackSpending,h=function(){g&&g(!0)};return(0,d.jsxs)("button",{className:"disabled:bg-neutral-500/50 disabled:text-neutral-400 disabled:cursor-default w-full px-4 py-2 text-white bg-red-500 hover:bg-red-500/50 transition rounded-lg ".concat(c),disabled:f,onClick:function(){return h()},children:[e&&e,b]})}},3006:function(a,b,c){"use strict";c.r(b),c.d(b,{"__N_SSP":function(){return an},default:function(){return ao}});var d,e=c(7568),f=c(6042),g=c(9396),h=c(4051),i=c.n(h),j=c(5893),k=c(7294),l=c(2290),m=c(5208),n=c(6464),o=c(797),p=c(5982),q=c(5159),r=(d=(0,e.Z)(i().mark(function a(){var b,c;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("".concat("https://localhost:3001","/api/create_link_token"),{method:"POST"});case 2:if((b=a.sent).ok){a.next=6;break}return console.log("vro, something is wrong"),a.abrupt("return");case 6:return a.next=8,b.json();case 8:if(!(c=a.sent)){a.next=14;break}if(!(null!=c.error)){a.next=13;break}return console.log("vro something else is wrong",c.error),a.abrupt("return");case 13:localStorage.setItem("link_token",c.link_token);case 14:case"end":return a.stop()}},a)})),function(){return d.apply(this,arguments)}),s=function(a){var b,c=a.text,d=a.customCSS,f=a.removeOldItem,g=(0,k.useContext)(m.S).signedUser,h=(0,k.useState)(null),n=h[0],o=h[1],s=(0,k.useContext)(l.c);s.item,s.setItem,s.bankAccounts,s.setBankAccounts,(0,k.useEffect)(function(){var a=!0;return r(),a&&o(window.localStorage.getItem("link_token")),console.log("infinitelooptest"),function(){a=!1}},[]);var t=(b=(0,e.Z)(i().mark(function a(){var b,c,d,e;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!f){a.next=15;break}return a.next=3,fetch("".concat("https://localhost:3001","/account/delete-item"),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:f})});case 3:return b=a.sent,a.next=6,b.json();case 6:d=(c=a.sent).code,e=c.error,a.t0=d,a.next=200===a.t0?12:14;break;case 12:return v(),a.abrupt("break",14);case 14:return a.abrupt("return");case 15:v();case 16:case"end":return a.stop()}},a)})),function(){return b.apply(this,arguments)}),u=(0,p.usePlaidLink)({token:n,onSuccess:function(a,b){var c;(c=(0,e.Z)(i().mark(function b(){var c,d,e,f,h,j,k;return i().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,fetch("".concat("https://localhost:3001","/api/set_access_token"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:"public_token=".concat(a)});case 2:return c=b.sent,b.next=5,c.json();case 5:return d=b.sent,e={userId:g.userId,access_token:d.access_token,item_id:d.item_id},b.next=9,fetch("".concat("https://localhost:3001","/account/create-item"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)});case 9:return f=b.sent,b.next=12,f.json();case 12:j=(h=b.sent).code,k=h.returningId,b.t0=j,b.next=201===b.t0?18:20;break;case 18:return console.log("yo bro success man"),b.abrupt("break",20);case 20:case"end":return b.stop()}},b)})),function(){return c.apply(this,arguments)})()},onExit:function(a,b){console.log(a),console.log("yo bro pleaseee fix this issue!!!")}}),v=u.open,w=u.ready;return(0,j.jsxs)("button",{onClick:function(){return t()},className:"px-4 py-3 font-medium text-white transition bg-red-500 rounded-md hover:bg-red-500/75 disabled:bg-gray-500 disabled:text-white flex items-center justify-center gap-x-3\n      ".concat(d,"\n    "),disabled:!w,children:[c,(0,j.jsx)(q.Z,{className:"w-5 h-5"})]})},t=s;function u(a){a.selected;var b,c=(0,k.useContext)(l.c),d=c.bankAccounts,h=c.setBankAccounts,m=(c.setTransactions,c.setDisplayTransactions),p=c.setTransactionsId,q=(0,k.useContext)(n.q),r=q.tab,s=q.setTab,u=(b=(0,e.Z)(i().mark(function a(b,c){var e,j,k,l,n,q,r;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return j=(e=new Date).toISOString().substring(0,10),k=new Date(e.setMonth(e.getMonth()-6)),l=k.toISOString().substring(0,10),a.next=6,fetch("".concat("https://localhost:3001","/api/transactions/").concat(b,"/").concat(l,"/").concat(j),{method:"GET"});case 6:return n=a.sent,a.next=9,n.json();case 9:r=(q=a.sent.transactions).filter(function(a){return a.account_id==c}),d.forEach(function(a,b){var e,i=null===(e=a.accounts)|| void 0===e?void 0:e.findIndex(function(a){return a.account_id===c});if(-1!=i&& void 0!==i){var j=(0,o.Z)(d);j[b].accounts[i]=(0,g.Z)((0,f.Z)({},j[b].accounts[i]),{transactions:r}),h(j)}}),p(c),s("Transactions"),m(!0);case 15:case"end":return a.stop()}},a)})),function(a,c){return b.apply(this,arguments)});return(0,j.jsxs)("div",{className:"absolute inset-0 h-full p-10 bg-neutral-900 ".concat(r," overflow-y-scroll removeScrollbar"),children:[(0,j.jsxs)("div",{className:"w-full mb-24",children:[(0,j.jsx)("h1",{className:"text-4xl font-semibold text-white",children:"Accounts"}),(0,j.jsx)("p",{className:"mt-2 text-neutral-400",children:"View all accounts you have linked with us."})]}),(0,j.jsxs)("div",{className:"w-full h-full",children:[d.map(function(a){return(0,j.jsx)(j.Fragment,{children:a.error&&(0,j.jsxs)("div",{className:"my-24",children:[(0,j.jsx)("p",{className:"mb-2 text-sm font-medium text-neutral-400",children:"Accounts that need extra attention."}),(0,j.jsx)("div",{className:"grid grid-cols-1 gap-16 p-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 bg-neutral-700/10 rounded-xl",children:(0,j.jsxs)("div",{className:"flex flex-col items-start justify-center w-full grid-cols-1 px-4 py-6 transition rounded-lg bg-neutral-800 hover:shadow-md",children:[(0,j.jsx)("h3",{className:"mb-3 text-xl text-neutral-400",children:a.institution}),(0,j.jsxs)("div",{className:"mb-5 text-sm text-neutral-600",children:[(0,j.jsx)("p",{className:"text-neutral-400",children:"This account requires extra attention."}),(0,j.jsxs)("p",{className:"text-xs",children:["Error: ",a.error]})]}),(0,j.jsx)(t,{text:"ITEM_LOGIN_REQUIRED"==a.error&&"Relogin",customCSS:"w-full",removeOldItem:a.id})]},a.error)})]})})}),(0,j.jsxs)("div",{className:"my-24",children:[(0,j.jsx)("p",{className:"mb-2 text-sm font-medium text-neutral-400",children:"Credit Cards"}),(0,j.jsx)("div",{className:"grid grid-cols-1 gap-16 p-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 bg-neutral-700/10 rounded-xl",children:d.map(function(a){return(0,j.jsx)(j.Fragment,{children:!a.error&&(0,j.jsx)(j.Fragment,{children:a.accounts.map(function(b){var c;return(0,j.jsx)(j.Fragment,{children:"credit card"==b.subtype&&(0,j.jsxs)("div",{className:"w-full grid-cols-1 px-4 py-6 transition rounded-lg shadow-xl bg-neutral-800",children:[(0,j.jsx)("h1",{className:"text-2xl font-medium text-white",children:b.official_name}),(0,j.jsx)("div",{className:"mt-2",children:(0,j.jsxs)("p",{className:"flex flex-col text-xl text-neutral-400",children:[(0,j.jsx)("span",{className:"text-sm text-gray-200",children:"Total Balance"}),(0,j.jsx)("span",{className:"font-medium text-red-400",children:(null===(c=b.balances)|| void 0===c?void 0:c.current).toLocaleString("en-us",{style:"currency",currency:b.balances.iso_currency_code})})]})}),(0,j.jsx)("button",{className:"w-full px-4 py-2 mt-4 font-medium text-white transition bg-red-500 rounded-lg hover:bg-red-500/75",onClick:function(){return u(a.accessToken,b.account_id)},children:"View Account"})]},b.account_id)})})})})})})]}),(0,j.jsxs)("div",{className:"my-24",children:[(0,j.jsx)("p",{className:"mb-2 text-sm font-medium text-neutral-400",children:"Checking Accounts"}),(0,j.jsx)("div",{className:"grid grid-cols-1 gap-16 p-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 bg-neutral-700/10 rounded-xl",children:d.map(function(a){return(0,j.jsx)(j.Fragment,{children:!a.error&&(0,j.jsx)(j.Fragment,{children:a.accounts.map(function(b){var c;return(0,j.jsx)(j.Fragment,{children:"checking"==b.subtype&&(0,j.jsxs)("div",{className:"w-full grid-cols-1 px-4 py-6 transition rounded-lg shadow-xl bg-neutral-800",children:[(0,j.jsx)("h1",{className:"text-2xl font-medium text-white",children:b.official_name}),(0,j.jsx)("div",{className:"mt-2",children:(0,j.jsxs)("p",{className:"flex flex-col text-xl text-neutral-400",children:[(0,j.jsx)("span",{className:"text-sm text-gray-200",children:"Total Balance"}),(0,j.jsx)("span",{className:"font-medium text-red-400",children:(null===(c=b.balances)|| void 0===c?void 0:c.current).toLocaleString("en-us",{style:"currency",currency:b.balances.iso_currency_code})})]})}),(0,j.jsx)("button",{className:"w-full px-4 py-2 mt-4 font-medium text-white transition bg-red-500 rounded-lg hover:bg-red-500/75",onClick:function(){return u(a.accessToken,b.account_id)},children:"View Account"})]},b.account_id)})})})})})})]}),(0,j.jsx)(t,{customCSS:"fixed bottom-5 right-5 h-16 rounded-xl w-16 text-neutral-900 hover:bg-red-600/50 hover:text-white py-4 bg-red-600 shadow-xl"})]})]})}c(1664);var v=c(7609);function w(){var a=(0,k.useContext)(m.S).signedUser,b=(0,k.useContext)(v.N).theme,c=(0,k.useState)(!1);return c[0],c[1],(0,k.useRef)(),(0,j.jsx)("div",{className:"hidden w-full max-w-xs mt-10 ml-auto ".concat("dark"===b?"bg-neutral-700/20":"bg-neutral-200"," rounded-xl lg:block"),children:(0,j.jsx)("div",{className:"\n       flex relative items-center justify-center flex-col  p-4 transition rounded-lg h-26",children:(0,j.jsxs)("div",{className:"flex flex-col items-center justify-center p-4 rounded-xl",children:[(0,j.jsxs)("div",{className:"flex flex-col xl:flex-row gap-x-2",children:[(0,j.jsx)("h3",{className:"hidden text-xl font-medium ".concat("dark"===b?"text-white":"text-neutral-900"," lg:block sm:text-sm md:text-md lg:text-lg"),children:null==a?void 0:a.firstName}),(0,j.jsx)("h3",{className:"hidden text-xl font-medium ".concat("dark"===b?"text-white":"text-neutral-900"," lg:block sm:text-sm md:text-md lg:text-lg"),children:null==a?void 0:a.lastName})]}),(0,j.jsx)("p",{className:"hidden text-xs ".concat("dark"===b?"text-neutral-300/75":"text-neutral-600/75"," lg:block md:text-sm lg:text-base"),children:null==a?void 0:a.email})]})})})}var x=c(5575),y=c(364),z=c(2659),A=c(2736),B=c(104);function C(){var a=(0,k.useContext)(n.q),b=a.tab,c=a.setTab,d=a.subLink,e=a.setSublink,f=(0,k.useContext)(v.N).theme,g=[{name:"Overview",func:function(){c("Overview")},icon:(0,j.jsx)(x.Z,{className:"w-7 h-7"})},{name:"Accounts",func:function(){c("Accounts")},icon:(0,j.jsx)(y.Z,{className:"w-7 h-7"})},{name:"Settings",func:function(){c("Settings")},icon:(0,j.jsx)(z.Z,{className:" w-7 h-7"}),subLink:[{name:"Profile",func:function(){e("Profile")},icon:(0,j.jsx)(y.Z,{className:"w-5 h-5 "})},{name:"Accounts",func:function(){e("Accounts")},icon:(0,j.jsx)(A.Z,{className:"w-5 h-5 "})},]},];return console.log(b),(0,j.jsxs)("div",{className:"relative w-full h-full max-w-xs mt-8 mb-10 ml-auto lg:mt-0",children:[(0,j.jsx)("nav",{children:g.map(function(a,c){var e;return(0,j.jsx)(j.Fragment,{children:a.name===b?(0,j.jsxs)("li",{className:"items-center justify-center block p-3 my-4 text-base font-medium text-white list-none lg:p-4 lg:items-start rounded-xl ".concat("dark"===f?"bg-neutral-900/50":"bg-neutral-100"," gap-x-3"),children:[(0,j.jsxs)("span",{className:"flex items-center text-red-500 gap-x-3 ",children:[(0,j.jsxs)("span",{className:"mx-auto lg:mx-0",children:[a.icon," "]}),(0,j.jsx)("span",{className:"hidden lg:block",children:a.name})]}),null===(e=a.subLink)|| void 0===e?void 0:e.map(function(a,b){return(0,j.jsxs)("li",{className:"items-center text-sm justify-start p-3 my-4 flex font-medium list-none lg:p-4 lg:items-start rounded-xl  cursor-pointer gap-x-3 \n                ".concat("dark"===f&&d===a.name?"text-red-500 bg-neutral-800 cursor-auto":"bg-neutral-700/20 ","\n                ").concat("light"===f&&d===a.name?"text-red-500 bg-white cursor-auto":" bg-gray-100  ","\n                "),onClick:a.func,children:[(0,j.jsx)("span",{className:"mx-auto lg:mx-0",children:a.icon})," ",(0,j.jsx)("span",{className:"hidden lg:block",children:a.name})]},b)})]},c):(0,j.jsxs)("li",{onClick:a.func,className:"flex items-center justify-center p-3 my-4 text-base font-medium text-white list-none cursor-pointer lg:justify-start lg:p-4 rounded-xl ".concat("dark"===f?"hover:bg-neutral-900/50":"hover:bg-neutral-100"," gap-x-3"),children:[(0,j.jsx)("p",{className:"mx-auto ".concat("dark"===f?"text-neutral-400":"text-neutral-900"," lg:mx-0"),children:a.icon}),(0,j.jsx)("p",{className:"hidden lg:block ".concat("dark"===f?"text-white":"text-neutral-900"),children:a.name})]})})})}),(0,j.jsxs)("li",{className:"absolute bottom-0 flex items-center justify-start w-full p-4 list-none cursor-pointer rounded-xl ".concat("dark"===f?"hover:text-red-500 text-neutral-200 hover:bg-neutral-900/50":"hover:text-red-500 text-neutral-900 hover:bg-neutral-200"," gap-x-3"),children:[(0,j.jsx)(B.Z,{className:"mx-auto w-7 h-7 lg:mx-0"}),(0,j.jsx)("span",{className:"hidden lg:block",children:"Sign out"})]})]})}var D,E=c(5236),F=c(8163),G=c(2077),H=c(4323),I=function(a){var b=a.setTimeframe,c=a.timeframe;a.display;var d=(0,k.useContext)(n.q).tab,e=(0,k.useState)(c),f=e[0],g=e[1],h=(0,k.useState)(!1),i=h[0],l=h[1],m=function(a){l(!i),g(a)};return(0,k.useEffect)(function(){return b(f),function(){}},[f]),(0,k.useEffect)(function(){b("6 months"),g("6 months")},[d]),(0,j.jsxs)("div",{className:"flex flex-wrap w-full gap-3 my-2",children:[(0,j.jsxs)("li",{className:"flex items-center justify-center px-4 py-2 text-xs font-medium text-white list-none transition cursor-pointer sm:text-sm bg-neutral-400/25 rounded-xl hover:bg-neutral-500/50 gap-x-2",onClick:function(){return l(!i)},children:[(0,j.jsx)("p",{className:"flex items-center justify-center gpa-x-3",children:f}),(0,j.jsx)("span",{className:"".concat(i?"rotate-0":"rotate-180"," transition"),children:(0,j.jsx)(H.Z,{className:"w-5 h-5"})})]}),(0,j.jsx)("div",{className:"flex gap-x-3",children:["6 months","12 months","24 months","YTD"].map(function(a,b){return(0,j.jsx)(j.Fragment,{children:a!=f&&(0,j.jsx)("li",{className:"".concat(i?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"," px-4 py-2 text-sm font-medium text-white list-none transition cursor-pointer bg-neutral-800/50 rounded-xl hover:bg-neutral-700"),onClick:function(){return m(a)},children:a})})})})]})},J=function(a){var b=a.transaction,c=a.display,d=a.index,e=function(a){if(a){var b=a.split("-"),c=["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(b[1])-1],d=b[0],e=b[2];return{month:c,year:d,day:e}}},f=function(a){return -1===Math.sign(a)?"checking"!==c.subtype:"checking"===c.subtype};return(0,j.jsxs)("div",{className:"w-full my-6",children:[(0,j.jsxs)("p",{className:"my-2 text-sm font-light text-neutral-600",children:[e(b.date).month," ",e(b.date).day," ",e(b.date).year]}),(0,j.jsxs)("div",{className:"flex-col-reverse items-start gap-y-2 flex sm:items-center sm:justify-between px-4 py-3 ".concat(f(b.amount)?"bg-red-400 bg-opacity-[3%]":"bg-green-200 bg-opacity-[3%]"," rounded-xl"),children:[(0,j.jsx)("h1",{className:"flex-1 text-xs font-medium text-white sm:text-sm",children:b.merchant_name||b.name}),(0,j.jsx)("p",{className:"flex-1 text-right ".concat(f(b.amount)?"text-red-500":"text-green-500"),children:"checking"===c.subtype?(0,j.jsx)(j.Fragment,{children:(-1*b.amount).toLocaleString("en-us",{style:"currency",currency:b.iso_currency_code})}):(0,j.jsx)(j.Fragment,{children:b.amount.toLocaleString("en-us",{style:"currency",currency:b.iso_currency_code})})})]})]},d)},K=function(a){var b=a.category,c=a.display,d=(0,k.useState)(),e=d[0],f=d[1],g=(0,k.useState)(3),h=g[0],i=g[1],l=function(a){var b=0,c="USD";return a.transactions.forEach(function(a){b+=a.amount,c=a.iso_currency_code}),{total:b,currencyCode:c}};return(0,k.useEffect)(function(){var a=(null==a?void 0:a.languages)&&(null==a?void 0:a.languages.length)?null==a?void 0:a.languages[0]:null==a?void 0:a.language;f(a||"en-us")},[]),(0,j.jsxs)("div",{className:"w-full",children:[(0,j.jsx)("p",{className:"mt-10 text-sm font-medium text-red-400",children:b.category}),(0,j.jsxs)("div",{className:"\n      w-full h-auto p-6 mt-2 bg-neutral-800/20 rounded-xl\n      ".concat(b.transactions.length>3&&"hover:bg-neutral-800/60 cursor-pointer","\n      "),onClick:function(){return b.transactions.length>3&&i(3===h?1e3:3)},children:[(0,j.jsx)("div",{children:(0,j.jsxs)("p",{className:"text-xl font-medium text-neutral-400",children:["Total Spendature:",(0,j.jsxs)("span",{className:"text-white",children:[" ",l(b).total.toLocaleString(e,{style:"currency",currency:l(b).currencyCode})]})]})}),(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"mt-6 text-lg font-medium text-white",children:"View all your expenses:"}),b.transactions.map(function(a,b){return(0,j.jsx)(j.Fragment,{children:b<h&&(0,j.jsx)(J,{display:c,transaction:a,index:b},b)})})]})]})]})},L=(D=(0,e.Z)(i().mark(function a(b,c,d){var e,f,g,h,j,k,l;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return f=(e=new Date).toISOString().substring(0,10),g=new Date(e.setMonth(e.getMonth()-b)),console.log(b),h=g.toISOString().substring(0,10),console.log(h),a.next=8,fetch("".concat("https://localhost:3001","/api/transactions/").concat(c,"/").concat(h,"/").concat(f),{method:"GET"});case 8:return j=a.sent,a.next=11,j.json();case 11:return l=(k=a.sent.transactions).filter(function(a){return a.account_id==d}),a.abrupt("return",l);case 14:case"end":return a.stop()}},a)})),function(a,b,c){return D.apply(this,arguments)}),M=c(3342),N=function(a){var b=a.setSortBy,c=(a.timeframe,a.display),d=(0,k.useState)("Newest to Oldest"),e=d[0],f=d[1],g=(0,k.useState)(!1),h=g[0],i=g[1],l=function(){console.log("work ?"),f("Newest to Oldest"===e?"Oldest to Newest":"Newest to Oldest"),b(e)};return(0,k.useEffect)(function(){return f("Newest to Oldest"),b(e),console.log("infinitelooptest"),function(){}},[c]),(0,j.jsxs)("div",{className:"inline-block text-white list-none bg-red-600 rounded-xl",onClick:function(){return i(!h)},children:[(0,j.jsxs)("li",{className:"flex w-full gap-3 px-4 py-2 text-sm transition cursor-pointer rounded-xl",children:[e,(0,j.jsx)(M.Z,{className:"w-5 h-5"})]}),h&&(0,j.jsx)("div",{className:"rounded-full",children:(0,j.jsx)("li",{className:"flex gap-3 px-4 py-4 text-sm transition cursor-pointer rounded-bl-xl rounded-br-xl bg-red-700/90 hover:bg-red-800/50",onClick:function(){return l()},children:"Newest to Oldest"===e?(0,j.jsx)(j.Fragment,{children:"Oldest to Newest"}):(0,j.jsx)(j.Fragment,{children:"Newest to Oldest"})})})]})},O=function(a){var b,c,d,e=a.display,f=a.setDisplayAmount;return(0,j.jsx)("div",{className:"w-full p-6 my-2 bg-neutral-800/50 rounded-xl gap-y-6",children:(0,j.jsx)("input",{type:"range",className:"w-full bg-gray-500 rounded-lg outline-none appearance-none cursor-pointer range-lg dark:bg-gray-700",step:"0.01",defaultValue:null===(b=e.balances)|| void 0===b?void 0:b.current,min:null===(c=e.accLiability)|| void 0===c?void 0:c.minimum_payment_amount,max:null===(d=e.balances)|| void 0===d?void 0:d.current,onChange:function(a){return f(a.target.value)}})})},P=function(a){var b,c,d,e,f,g,h,i,k,l,m,n,o,p,q,r=a.displayAmount,s=a.userLocale,t=a.display,u=a.penalty,v=function(a){if(a){var b=a.split("-"),c=["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(b[1])-1],d=b[0],e=b[2];return{month:c,year:d,day:e}}};return(0,j.jsxs)("div",{className:"w-full col-span-4 p-6 bg-red-600/70 rounded-xl",children:[(0,j.jsx)("span",{className:"text-base font-medium text-neutral-300",children:r==(null===(b=t.balances)|| void 0===b?void 0:b.current)?"Total Balance":parseInt(r)===(null===(c=t.accLiability)|| void 0===c?void 0:c.minimum_payment_amount)?"Minimum Payment":"Custom Amount"}),(0,j.jsx)("h2",{className:"text-3xl font-medium text-white",children:parseFloat(r).toLocaleString(s,{style:"currency",currency:(null===(d=t.balances)|| void 0===d?void 0:d.iso_currency_code)||"USD"})}),(0,j.jsxs)("p",{className:"flex flex-col items-start justify-start mt-2 mb-4 xl:items-center xl:justify-between xl:flex-row",children:[(0,j.jsx)("span",{className:" text-neutral-300",children:r!=(null===(e=t.balances)|| void 0===e?void 0:e.current)?"Estimated Penalty Charges":"Statement Balance as of ".concat(v(null===(f=t.accLiability)|| void 0===f?void 0:f.last_statement_issue_date).month," ").concat(v(null===(g=t.accLiability)|| void 0===g?void 0:g.last_statement_issue_date).day," ").concat(v(null===(h=t.accLiability)|| void 0===h?void 0:h.last_statement_issue_date).year)}),(0,j.jsx)("span",{className:"text-lg font-medium text-neutral-100 ",children:r!=(null===(i=t.balances)|| void 0===i?void 0:i.current)?parseFloat(u).toLocaleString(s,{style:"currency",currency:(null===(k=t.balances)|| void 0===k?void 0:k.iso_currency_code)||"USD"}):(null===(l=t.accLiability)|| void 0===l?void 0:l.last_statement_balance).toLocaleString(s,{style:"currency",currency:(null===(m=t.balances)|| void 0===m?void 0:m.iso_currency_code)||"USD"})})]}),(0,j.jsxs)("p",{className:"mt-2 text-sm text-neutral-300",children:[(null===(n=t.accLiability)|| void 0===n?void 0:n.minimum_payment_amount).toLocaleString(s,{style:"currency",currency:(null===(o=t.balances)|| void 0===o?void 0:o.iso_currency_code)||"USD"})," minimum payment due on ",v(null===(p=t.accLiability)|| void 0===p?void 0:p.next_payment_due_date).month," ",v(null===(q=t.accLiability)|| void 0===q?void 0:q.next_payment_due_date).day]})]})},Q=function(a){var b,c=a.displayAmount,d=a.display,e=a.userLocale;return(0,j.jsxs)("div",{className:"w-full col-span-4 p-6 bg-red-600/70 rounded-xl",children:[(0,j.jsx)("span",{className:"text-base font-medium text-neutral-200",children:"Available balance"}),(0,j.jsx)("h2",{className:"text-2xl font-medium text-white",children:parseFloat(c).toLocaleString(e,{style:"currency",currency:(null===(b=d.balances)|| void 0===b?void 0:b.iso_currency_code)||"USD"})})]})},R=function(a){var b,c=a.display,d=a.timeframe,e=a.userLocale,f=(0,k.useState)(0),g=f[0],h=f[1];return(0,k.useEffect)(function(){return h(0),function(){if(null!=c)switch(d){case"6 months":var a,b=null==c?void 0:null===(a=c.transactions)|| void 0===a?void 0:a.filter(function(a){return -1===Math.sign(a.amount)}),e=0;null==b||b.forEach(function(a){e+=-1*a.amount}),h(e.toFixed(2));break;case"12 months":var f,g=null==c?void 0:null===(f=c.twelveMonthTransactions)|| void 0===f?void 0:f.filter(function(a){return -1===Math.sign(a.amount)}),i=0;null==g||g.forEach(function(a){i+=-1*a.amount}),h(i.toFixed(2));break;case"24 months":var j,k=null==c?void 0:null===(j=c.twentyFourMonthTransactions)|| void 0===j?void 0:j.filter(function(a){return -1===Math.sign(a.amount)}),l=0;null==k||k.forEach(function(a){l+=-1*a.amount}),h(l.toFixed(2));break;case"YTD":var m,n=null==c?void 0:null===(m=c.ytdTransactions)|| void 0===m?void 0:m.filter(function(a){return -1===Math.sign(a.amount)}),o=0;null==n||n.forEach(function(a){o+=-1*a.amount}),h(o.toFixed(2))}}(),console.log("infinitelooptest"),function(){}},[d,c]),(0,j.jsxs)("div",{className:"\n    ".concat("credit card"===c.subtype&&"col-span-4 p-6 bg-indigo-600 rounded-xl xl:col-span-4","\n    ").concat("checking"===c.subtype&&"col-span-4 p-6 bg-indigo-600 rounded-xl xl:col-span-2","\n    "),children:[(0,j.jsx)("span",{className:"text-neutral-300 ",children:"Total earned"}),(0,j.jsx)("p",{className:"text-2xl font-medium text-white",children:parseFloat(g).toLocaleString(e,{style:"currency",currency:(null===(b=c.balances)|| void 0===b?void 0:b.iso_currency_code)||"USD"})}),(0,j.jsxs)("p",{className:"mt-2 text-sm text-neutral-300/75",children:["Within ",(0,j.jsx)("b",{children:d})]})]})},S=function(a){var b,c=a.display,d=a.timeframe,e=a.userLocale,f=a.setOpenTrackSpending,g=(0,k.useState)(0),h=g[0],i=g[1],l=function(){f(!0)};return(0,k.useEffect)(function(){return i(0),function(){if(null!=c)switch(d){case"6 months":var a,b=null==c?void 0:null===(a=c.transactions)|| void 0===a?void 0:a.filter(function(a){return 1===Math.sign(a.amount)}),e=0;null==b||b.forEach(function(a){e+=-1*a.amount}),i(e.toFixed(2));break;case"12 months":var f,g=null==c?void 0:null===(f=c.twelveMonthTransactions)|| void 0===f?void 0:f.filter(function(a){return 1===Math.sign(a.amount)}),h=0;null==g||g.forEach(function(a){h+=-1*a.amount}),i(h.toFixed(2));break;case"YTD":var j,k=null==c?void 0:null===(j=c.ytdTransactions)|| void 0===j?void 0:j.filter(function(a){return 1===Math.sign(a.amount)}),l=0;null==k||k.forEach(function(a){l+=-1*a.amount}),i(l.toFixed(2));break;case"24 months":var m,n=null==c?void 0:null===(m=c.twentyFourMonthTransactions)|| void 0===m?void 0:m.filter(function(a){return 1===Math.sign(a.amount)}),o=0;null==n||n.forEach(function(a){o+=-1*a.amount}),i(o.toFixed(2))}}(),console.log("infinitelooptest"),function(){}},[d,c]),(0,j.jsxs)("div",{className:"\n      ".concat("credit card"===c.subtype&&"col-span-4 p-6 bg-sky-600 rounded-xl xl:col-span-4","\n      ").concat("checking"===c.subtype&&"col-span-4 p-6 bg-sky-600 rounded-xl xl:col-span-2","\n      "),onClick:function(){return l()},children:[(0,j.jsx)("span",{className:"text-neutral-300 text-",children:"Total Spent"}),(0,j.jsx)("p",{className:"text-2xl font-medium text-white",children:parseFloat(h).toLocaleString(e,{style:"currency",currency:(null===(b=c.balances)|| void 0===b?void 0:b.iso_currency_code)||"USD"})}),(0,j.jsxs)("p",{className:"mt-2 text-sm text-neutral-300/75",children:["Within ",(0,j.jsx)("b",{children:d})]})]})};function T(){var a,b,c,d,h=(0,k.useContext)(l.c),m=(h.transactions,h.bankAccounts),p=h.transactionsId,q=h.setBankAccounts,r=(0,k.useContext)(n.q),s=r.tab,t=r.setTab,u=(0,k.useState)(0),v=u[0],w=u[1],x=(0,k.useState)(0),y=x[0],z=x[1],A=(0,k.useState)(),B=A[0],C=A[1],D=(0,k.useState)(),G=D[0],H=D[1],M=(0,k.useState)(3);M[0],M[1];var T=(0,k.useState)(!1),U=T[0],V=T[1],W=(0,k.useState)(null),X=W[0],Y=W[1],Z=(0,k.useState)("6 months"),$=Z[0],_=Z[1],aa=(0,k.useState)(),ab=aa[0],ac=aa[1];return console.log(m),(0,k.useEffect)(function(){var a;return m.forEach(function(b,c){var d,e,f,g;b.accounts&& -1!=(a=null===(d=b.accounts)|| void 0===d?void 0:d.findIndex(function(a){return a.account_id===p}))&&(Y(m[c].accounts[a]),w(null===(f=null===(e=m[c])|| void 0===e?void 0:e.accounts[a])|| void 0===f?void 0:null===(g=f.balances)|| void 0===g?void 0:g.current))}),function(){}},[p]),(0,k.useEffect)(function(){if(null==X?void 0:X.accLiability){if(0===X.accLiability.minimum_payment_amount||v>=(null==X?void 0:null===(a=X.accLiability)|| void 0===a?void 0:a.last_statement_balance)){z(0);return}var a,b,c,d,e,f=(null===(b=X.accLiability)|| void 0===b?void 0:b.aprs.filter(function(a){return"purchase_apr"===a.apr_type}))||29.99;z((((null===(c=f[0])|| void 0===c?void 0:c.apr_percentage)||.2999).toFixed(4)/12*(null===(d=X.balances)|| void 0===d?void 0:d.current)-((null===(e=f[0])|| void 0===e?void 0:e.apr_percentage)||.2999).toFixed(4)/12*v).toFixed(2))}},[v]),(0,k.useEffect)(function(){var a=!0,b=(null==b?void 0:b.languages)&&(null==b?void 0:b.languages.length)?null==b?void 0:b.languages[0]:null==b?void 0:b.language;return a&&C(b||"en-us"),function(){a=!1}},[]),(0,k.useEffect)(function(){var a,b,c,d,e=[];if(null!=X)switch($){case"6 months":null==X||null===(a=X.transactions)|| void 0===a||a.forEach(function(a){if(e.some(function(b){return b.category===a.category[1]})){var b=e.findIndex(function(b){return b.category===a.category[1]});e[b].transactions.push(a),H(e)}else{var c={category:a.category[1]||a.category[0],transactions:[a]};e.push(c),H(e)}});break;case"12 months":null==X||null===(b=X.twelveMonthTransactions)|| void 0===b||b.forEach(function(a){if(e.some(function(b){return b.category===a.category[1]})){var b=e.findIndex(function(b){return b.category===a.category[1]});e[b].transactions.push(a),H(e)}else{var c={category:a.category[1]||a.category[0],transactions:[a]};e.push(c),H(e)}});break;case"24 months":null==X||null===(c=X.twentyFourMonthTransactions)|| void 0===c||c.forEach(function(a){if(e.some(function(b){return b.category===a.category[1]})){var b=e.findIndex(function(b){return b.category===a.category[1]});e[b].transactions.push(a),H(e)}else{var c={category:a.category[1]||a.category[0],transactions:[a]};e.push(c),H(e)}});break;case"YTD":null==X||null===(d=X.ytdTransactions)|| void 0===d||d.forEach(function(a){if(e.some(function(b){return b.category===a.category[1]})){var b=e.findIndex(function(b){return b.category===a.category[1]});e[b].transactions.push(a),H(e)}else{var c={category:a.category[1]||a.category[0],transactions:[a]};e.push(c),H(e)}})}},[X]),(0,k.useEffect)(function(){var a,b,c;switch($){case"6 months":return;case"YTD":m.forEach((a=(0,e.Z)(i().mark(function a(b,c){var d,e,h,j,k,l;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(-1==(e=null===(d=b.accounts)|| void 0===d?void 0:d.findIndex(function(a){return a.account_id===X.account_id}))|| void 0===e)){a.next=6;break}return a.abrupt("return");case 6:if(!m[c].accounts[e].hasOwnProperty("ytdTransactions")){a.next=10;break}return a.abrupt("return");case 10:for(h=new Date().getMonth()+1,j=0;h>1;)j+=1,h--;return a.next=15,L(j,m[c].accessToken,p);case 15:return k=a.sent,(l=(0,o.Z)(m))[c].accounts[e]=(0,g.Z)((0,f.Z)({},l[c].accounts[e]),{ytdTransactions:k}),a.next=20,q(l);case 20:Y(m[c].accounts[e]);case 21:case"end":return a.stop()}},a)})),function(b,c){return a.apply(this,arguments)}));break;case"12 months":m.forEach((b=(0,e.Z)(i().mark(function a(b,c){var d,e,h,j;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(-1==(e=null===(d=b.accounts)|| void 0===d?void 0:d.findIndex(function(a){return a.account_id===X.account_id}))|| void 0===e)){a.next=6;break}return a.abrupt("return");case 6:if(!m[c].accounts[e].hasOwnProperty("twelveMonthTransactions")){a.next=10;break}return a.abrupt("return");case 10:return a.next=12,L(12,m[c].accessToken,p);case 12:return h=a.sent,(j=(0,o.Z)(m))[c].accounts[e]=(0,g.Z)((0,f.Z)({},j[c].accounts[e]),{twelveMonthTransactions:h}),a.next=17,q(j);case 17:Y(m[c].accounts[e]);case 18:case"end":return a.stop()}},a)})),function(a,c){return b.apply(this,arguments)}));break;case"24 months":m.forEach((c=(0,e.Z)(i().mark(function a(b,c){var d,e,h,j;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(-1==(e=null===(d=b.accounts)|| void 0===d?void 0:d.findIndex(function(a){return a.account_id===X.account_id}))|| void 0===e)){a.next=6;break}return a.abrupt("return");case 6:if(!m[c].accounts[e].hasOwnProperty("twentyFourMonthTransactions")){a.next=10;break}return a.abrupt("return");case 10:return a.next=12,L(24,m[c].accessToken,p);case 12:return h=a.sent,(j=(0,o.Z)(m))[c].accounts[e]=(0,g.Z)((0,f.Z)({},j[c].accounts[e]),{twentyFourMonthTransactions:h}),a.next=17,q(j);case 17:Y(m[c].accounts[e]);case 18:case"end":return a.stop()}},a)})),function(a,b){return c.apply(this,arguments)}))}return function(){}},[$]),(0,k.useEffect)(function(){return null!=X&&function(){switch($){case"6 months":if("Newest to Oldest"===ab){var a,b=null==X?void 0:null===(a=X.transactions)|| void 0===a?void 0:a.sort(function(a,b){return new Date(b.date)-new Date(a.date)}),c=X;c.transactions=b,Y(c)}else{var d,e=null==X?void 0:null===(d=X.transactions)|| void 0===d?void 0:d.sort(function(a,b){return new Date(a.date)-new Date(b.date)}),f=X;f.transactions=e,Y(f)}break;case"YTD":if("Newest to Oldest"===ab){var g,h=null==X?void 0:null===(g=X.ytdTransactions)|| void 0===g?void 0:g.sort(function(a,b){return new Date(b.date)-new Date(a.date)}),i=X;i.transactions=h,Y(i)}else{var j,k=null==X?void 0:null===(j=X.ytdTransactions)|| void 0===j?void 0:j.sort(function(a,b){return new Date(a.date)-new Date(b.date)}),l=X;l.transactions=k,Y(l)}break;case"12 months":if("Newest to Oldest"===ab){var m,n=null==X?void 0:null===(m=X.twelveMonthTransactions)|| void 0===m?void 0:m.sort(function(a,b){return new Date(b.date)-new Date(a.date)}),o=X;o.transactions=n,Y(o)}else{var p,q=null==X?void 0:null===(p=X.twelveMonthTransactions)|| void 0===p?void 0:p.sort(function(a,b){return new Date(a.date)-new Date(b.date)}),r=X;r.transactions=q,Y(r)}break;case"24 months":if("Newest to Oldest"===ab){var s,t=null==X?void 0:null===(s=X.twentyFourMonthTransactions)|| void 0===s?void 0:s.sort(function(a,b){return new Date(b.date)-new Date(a.date)}),u=X;u.transactions=t,Y(u)}else{var v,w=null==X?void 0:null===(v=X.twentyFourMonthTransactions)|| void 0===v?void 0:v.sort(function(a,b){return new Date(a.date)-new Date(b.date)}),x=X;x.transactions=w,Y(x)}}}(),function(){}},[ab,$]),(0,j.jsx)("div",{className:"absolute top-0 bottom-0 left-0 right-0 h-full px-4  rounded-xl bg-neutral-900 ".concat("Transactions"===s?"translate-x-0":"translate-x-full"," transition duration-300 ease-in-out"),children:(0,j.jsx)("div",{className:"grid w-full h-full overflow-y-scroll xl:grid-cols-2 gap-x-6 removeScrollbar",children:null!=X&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{children:[(0,j.jsxs)("div",{className:"w-full py-10 ",children:[(0,j.jsxs)("h1",{className:"flex items-center justify-start text-2xl font-semibold text-white sm:text-3xl lg:text-4xl gap-x-3",children:[(0,j.jsx)("span",{onClick:function(){return t("View Accounts")},children:(0,j.jsx)(E.Z,{className:"w-12 h-12 text-red-500 transition cursor-pointer hover:text-red-500/75"})}),(0,j.jsx)("span",{className:"text-xl sm:text-3xl lg:text-4xl",children:null==X?void 0:X.official_name})]}),(0,j.jsx)("p",{className:"mt-2 text-neutral-400",children:"View all your most recent transactions."})]}),(0,j.jsxs)("div",{className:"grid w-full grid-cols-4 gap-3 my-2 xl:grid-cols-4 rounded-xl",children:[X.accLiability?(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(P,{display:X,displayAmount:v,userLocale:B,penalty:y})}):(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(Q,{displayAmount:v,userLocale:B,display:X})}),"credit card"===X.subtype?(0,j.jsx)(S,{display:X,timeframe:$,userLocale:B,setOpenTrackSpending:V}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(S,{display:X,timeframe:$,userLocale:B,setOpenTrackSpending:V}),(0,j.jsx)(R,{display:X,timeframe:$,userLocale:B})]})]}),X.accLiability&&(0,j.jsx)(O,{display:X,setDisplayAmount:w}),(0,j.jsxs)("div",{className:"mt-16 mb-2",children:[(0,j.jsx)("p",{className:"mb-2 text-2xl font-semibold text-white",children:"Transactions"}),(0,j.jsx)(N,{setSortBy:ac,timeframe:$,display:X}),(0,j.jsx)(I,{setTimeframe:_,timeframe:$,display:X})]}),(0,j.jsxs)("div",{className:"p-6 mb-10 rounded-xl bg-neutral-800/50",children:[(0,j.jsx)("div",{className:"flex flex-col items-start justify-between gap-6 lg:flex-row"}),"6 months"===$&&(0,j.jsx)(j.Fragment,{children:null===(a=X.transactions)|| void 0===a?void 0:a.map(function(a,b){return(0,j.jsx)(J,{display:X,transaction:a,index:b},b)})}),"YTD"===$&&(0,j.jsx)(j.Fragment,{children:null==X?void 0:null===(b=X.ytdTransactions)|| void 0===b?void 0:b.map(function(a,b){return(0,j.jsx)(J,{display:X,transaction:a,index:b},b)})}),"12 months"===$&&(0,j.jsx)(j.Fragment,{children:null==X?void 0:null===(c=X.twelveMonthTransactions)|| void 0===c?void 0:c.map(function(a,b){return(0,j.jsx)(J,{display:X,transaction:a,index:b},b)})}),"24 months"===$&&(0,j.jsx)(j.Fragment,{children:null==X?void 0:null===(d=X.twentyFourMonthTransactions)|| void 0===d?void 0:d.map(function(a,b){return(0,j.jsx)(J,{display:X,transaction:a,index:b},b)})})]})]}),(0,j.jsx)("div",{className:"xl:bg-black/0  xl:block \n            z-20 ".concat(U?"bg-black/50":"bg-black-0"," transition\n            fixed inset-0 pointer-events-none\n            "),children:(0,j.jsxs)("div",{className:"\n                xl:w-[50%] xl:h-full px-6 rounded-xl xl:block xl:py-6\n                overflow-y-scroll\n                removeScrollbar\n                absolute top-0 right-0 bottom-0  bg-neutral-900 w-[80%] sm:w-[70%] py-24 pointer-events-auto\n                ".concat(U?"translate-x-0 xl:translate-x-0":"translate-x-full xl:translate-x-0","\n                transition\n                "),children:[(0,j.jsx)("div",{className:"absolute top-0 right-0 mt-6 mr-6 text-xl xl:hidden",onClick:function(){return V(!U)},children:(0,j.jsx)(F.Z,{className:"w-8 h-8 text-red-500 transition cursor-pointer hover:text-red-500/50"})}),(0,j.jsx)("h1",{className:"flex items-center justify-start text-2xl font-semibold text-white sm:text-3xl lg:text-4xl gap-x-3",children:"Track your spending"}),(0,j.jsx)("p",{className:"mt-2 text-gray-400",children:"Track all your spendature through categories."}),null==G?void 0:G.map(function(a){return(0,j.jsx)(j.Fragment,{children:"Credit Card"!=a.category&&"Credit"!=a.category&&"Payroll"!=a.category&&"Deposit"!=a.category&&"Withdrawal"!=a.category&&"Refund"!=a.category&&(0,j.jsx)(K,{category:a,display:X})})})]})})]})})})}var U,V,W,X=(U=(0,e.Z)(i().mark(function a(b){var c,d,e,f,g;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("".concat("https://localhost:3001","/account/get-items/").concat(b),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return c=a.sent,a.next=5,c.json();case 5:e=(d=a.sent).code,f=d.message,g=d.accounts,a.t0=e,a.next=404===a.t0?12:200===a.t0?13:14;break;case 12:return a.abrupt("return","idk bro some fat ass error going on rn");case 13:return a.abrupt("return",g);case 14:case"end":return a.stop()}},a)})),function(a){return U.apply(this,arguments)}),Y=c(8428),Z=(V=(0,e.Z)(i().mark(function a(b){var c;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Promise.all(b.map(function(){var a=(0,e.Z)(i().mark(function a(b){var c,d,e,f,g,h;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("".concat("https://localhost:3001","/api/item/").concat(b.access_token),{method:"GET",agent:new Y.Agent({rejectUnauthorized:!1})});case 2:return c=a.sent,a.next=5,fetch("".concat("https://localhost:3001","/api/balance/").concat(b.access_token),{method:"GET"});case 5:return d=a.sent,a.next=8,c.json();case 8:return e=a.sent.institution,a.next=11,d.json();case 11:return g=(f=a.sent).accounts,h=f.error,console.log(h),a.next=17,{id:b.id||null,accessToken:b.access_token||null,institution:e.name||null,accounts:g||null,error:h?h.error_code:null};case 17:return a.abrupt("return",a.sent);case 18:case"end":return a.stop()}},a)}));return function(b){return a.apply(this,arguments)}}()));case 2:return c=a.sent,a.abrupt("return",c);case 4:case"end":return a.stop()}},a)})),function(a){return V.apply(this,arguments)});c(8428);var $,_=(W=(0,e.Z)(i().mark(function a(b){var c;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Promise.all(b.map(function(){var a=(0,e.Z)(i().mark(function a(b){var c,d,e,f;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("".concat("https://localhost:3001","/api/liabilities/").concat(b.access_token),{method:"GET"});case 2:return c=a.sent,a.next=5,c.json();case 5:if(e=(d=a.sent).error,f=d.liabilities,!e){a.next=12;break}return a.abrupt("return",e);case 12:return a.abrupt("return",f);case 13:case"end":return a.stop()}},a)}));return function(b){return a.apply(this,arguments)}}()));case 2:return c=a.sent,a.abrupt("return",c);case 4:case"end":return a.stop()}},a)})),function(a){return W.apply(this,arguments)}),aa=c(4924),ab=c(9534),ac=[{id:1,type:"text",label:"First Name",name:"firstName",placeholder:"First Name"},{id:2,type:"text",label:"Last Name",name:"lastName",placeholder:"Last Name"},{id:3,type:"email",label:"Email",name:"email",placeholder:"Email"},],ad=function(){var a=(0,k.useState)({firstName:"",lastName:"",email:""}),b=a[0],c=a[1],d=function(a){var b=a.target,d=b.name,e=b.value;c(function(a){return(0,g.Z)((0,f.Z)({},a),(0,aa.Z)({},d,e))})};return(0,j.jsxs)("div",{className:"w-full h-auto pb-24",children:[(0,j.jsx)("h1",{className:"text-2xl font-medium text-white",children:"Personal Information"}),(0,j.jsxs)("form",{className:"flex flex-col pb-16",children:[ac.map(function(a){var b=a.id,c=a.label,e=(0,ab.Z)(a,["id","label"]);return(0,j.jsxs)("div",{className:"flex flex-col items-start justify-center my-6",children:[(0,j.jsx)("label",{className:"mb-2 text-sm text-neutral-400",children:c}),(0,j.jsx)("input",(0,g.Z)((0,f.Z)({},e),{className:"w-full p-4 text-red-200 border-none outline-none focus:outline-none bg-neutral-800 rounded-xl outline-0",onChange:d}))]},b)}),(0,j.jsx)(G.Z,{text:"Save changes",customCSS:"w-40 ml-auto mt-2",disabled:""===b.firstName&&""===b.lastName&&""===b.email})]}),(0,j.jsx)("h1",{className:"text-2xl font-medium text-white",children:"Delete my account"}),(0,j.jsx)("p",{className:"max-w-xl mt-2 text-sm sm:text-base text-neutral-400",children:"All of your data will be deleted, personal information as well as bank information will be wiped. If you disable your account, you information will still be stored but you won't be allowed back into our site untill you have logged in and reconfirmed your password."}),(0,j.jsxs)("div",{className:"flex mt-12 gap-x-5",children:[(0,j.jsx)(G.Z,{text:"Disable my account",customCSS:"w-52"}),(0,j.jsx)("button",{className:"text-sm text-red-400",children:"Delete my account"})]})]})},ae=function(){var a=(0,k.useContext)(n.q),b=a.tab,c=a.subLink;return(0,j.jsxs)("div",{className:"absolute top-0 overflow-y-scroll bottom-0 left-0 right-0 h-full p-10 bg-neutral-900 ".concat("Settings"===b?"translate-x-0":"translate-x-full"," transition duration-300 ease-in-out removeScrollbar"),children:[(0,j.jsxs)("div",{className:"w-full",children:[(0,j.jsxs)("h1",{className:"text-4xl font-semibold text-white",children:[c," settings."]}),(0,j.jsx)("p",{className:"mt-2 text-neutral-400",children:"View all your account information. "})]}),(0,j.jsx)("div",{className:"w-full h-full py-24",children:(0,j.jsx)(ad,{})})]})},af=c(7338),ag=c(9223),ah=function(){var a=(0,k.useContext)(l.c),b=a.bankAccounts;a.setBankAccounts;var c=(0,k.useContext)(m.S).signedUser,d=(0,k.useContext)(n.q).tab,f=(0,k.useState)(),g=f[0],h=f[1],o=(0,k.useState)(),p=o[0],q=o[1],r=(0,k.useState)("en-us"),s=r[0],u=r[1];return(0,k.useEffect)(function(){var a=!0,b=(null==b?void 0:b.languages)&&(null==b?void 0:b.languages.length)?null==b?void 0:b.languages[0]:null==b?void 0:b.language;return a&&u(b||"en-us"),console.log("infinitelooptest"),function(){a=!1}},[]),(0,k.useEffect)(function(){var a;a=0,b.forEach(function(b){var c;null===(c=b.accounts)|| void 0===c||c.map(function(b){"credit card"==b.subtype&&(a+=b.balances.current)})}),q(a),console.log("infinitelooptest")},[b]),(0,k.useEffect)(function(){var a;a=[],b.forEach(function(b){var c;null===(c=b.accounts)|| void 0===c||c.map(function(b){if("credit card"==b.subtype){var c=new Date,d=new Date(b.accLiability.next_payment_due_date);0===b.accLiability.minimum_payment_amount&&d.setMonth(d.getMonth()+1);var e=d.getTime()-c.getTime(),f=e/864e5;if(!(f<0)){console.log(b);var g={account:b,due:b.balances.current,statement:b.accLiability.last_statement_balance-b.accLiability.last_payment_amount,minimumDue:b.accLiability.minimum_payment_amount,daysTillDue:parseInt(f),dueDate:b.accLiability.next_payment_due_date,currencyCode:b.balances.iso_currency_code};a.push(g),console.log(g)}}})}),a.sort(function(a,b){return parseInt(a.daysTillDue)-parseFloat(b.daysTillDue)}),h(a),console.log("infinitelooptest")},[b.length]),(0,k.useEffect)(function(){var a,c=[];(a=(0,e.Z)(i().mark(function a(){return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:b.forEach(function(a){var b;null===(b=a.accounts)|| void 0===b||b.forEach(function(a){c.push(a)})});case 1:case"end":return a.stop()}},a)})),function(){return a.apply(this,arguments)})(),console.log("infinitelooptest")},[b.length]),(0,j.jsxs)("div",{className:"absolute inset-0 h-full px-10 py-16 z-20 bg-neutral-900 overflow-y-scroll removeScrollbar ".concat("Overview"===d?"translate-x-0":"translate-x-full"," transition"),children:[(0,j.jsxs)("div",{className:"w-full mb-24",children:[(0,j.jsxs)("h1",{className:"text-2xl font-semibold text-white md:text-3xl xl:text-4xl",children:["Hi, ",c.firstName,", welcome back!"]}),(0,j.jsx)("p",{className:"mt-2 text-neutral-400",children:"Let's give you a quick overview of your current week."})]}),(0,j.jsxs)("div",{className:"w-full h-full",children:[(0,j.jsxs)("div",{className:"grid grid-cols-6 gap-6 ",children:[(0,j.jsxs)("div",{className:"relative w-full col-span-6 p-6 shadow-xl lg:col-span-2 bg-zinc-800 rounded-xl",children:[(0,j.jsx)(af.Z,{className:"mb-2 text-white w-14 h-14"}),(0,j.jsx)("h1",{className:"text-3xl font-medium text-white",children:null==p?void 0:p.toLocaleString(s,{style:"currency",currency:"USD"})}),(0,j.jsx)("p",{className:"mt-1 text-sm text-neutral-400",children:"Total credit card debt"})]}),(null==g?void 0:g.length)!=0&&(0,j.jsxs)("div",{className:"relative w-full col-span-6 p-6 shadow-xl lg:col-span-4 bg-zinc-800 rounded-xl",children:[(0,j.jsx)(ag.Z,{className:"mb-2 text-white w-14 h-14"}),(0,j.jsx)("p",{className:"text-xl font-medium text-white",children:(null==g?void 0:g.length)>1?"Debts are due soon":"A debt is due soon."}),(0,j.jsx)("div",{className:"grid w-full grid-cols-1 gap-6 p-4 my-2 sm:grid-cols-2 bg-zinc-900 rounded-xl",children:null==g?void 0:g.map(function(a,b){var c;return(0,j.jsx)(j.Fragment,{children:3!=b&&(0,j.jsx)(j.Fragment,{children:(null==a?void 0:a.due)>0&&a.daysTillDue<30&&(0,j.jsxs)("div",{className:"".concat(0===b?"sm:col-span-2 bg-neutral-500 p-4 rounded-xl":"sm:col-span-1 bg-neutral-600/50 rounded-xl p-4"),children:[(0,j.jsxs)("p",{className:"flex flex-wrap items-center justify-start gap-2 text-xs",children:[(0,j.jsx)("span",{className:"font-medium text-neutral-300",children:a.account.name}),(0,j.jsxs)("span",{className:"text-neutral-300",children:["*",a.account.mask]})]}),(0,j.jsx)("p",{className:"mt-4 text-sm text-neutral-300/75",children:0!=a.minimumDue?"Statement balance":"Total balance"}),(0,j.jsx)("p",{className:"text-2xl font-medium text-white",children:0!=a.minimumDue?null===(c=a.statement)|| void 0===c?void 0:c.toLocaleString(s,{style:"currency",currency:a.currencyCode}):a.due.toLocaleString(s,{style:"currency",currency:a.currencyCode})}),(0,j.jsxs)("p",{className:"mt-4 text-sm text-neutral-300/75",children:[(0,j.jsx)("span",{children:"You have "}),(0,j.jsxs)("span",{className:"font-medium text-white",children:[a.daysTillDue," "]}),(0,j.jsx)("span",{className:"font-medium text-white",children:1===a.daysTillDue?"day ":"days "}),(0,j.jsx)("span",{children:"left to pay this off."})]})]})})})})})]})]}),(0,j.jsxs)("div",{className:"pb-24",children:[(0,j.jsx)("p",{className:"mt-24 mb-2 text-sm font-medium text-neutral-400",children:"Accounts needed extra action."}),(0,j.jsx)("div",{className:"grid grid-cols-1 gap-16 p-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 bg-neutral-700/10 rounded-xl ",children:b.map(function(a){return(0,j.jsx)(j.Fragment,{children:a.error&&(0,j.jsxs)("div",{className:"flex flex-col items-start justify-center w-full grid-cols-1 px-4 py-6 transition rounded-lg bg-neutral-800 hover:shadow-md",children:[(0,j.jsx)("h3",{className:"mb-3 text-xl text-neutral-400",children:a.institution}),(0,j.jsxs)("div",{className:"mb-5 text-sm text-neutral-600",children:[(0,j.jsx)("p",{className:"text-neutral-400",children:"This account requires extra attention."}),(0,j.jsxs)("p",{className:"text-xs",children:["Error: ",a.error]})]}),(0,j.jsx)(t,{text:"ITEM_LOGIN_REQUIRED"==a.error&&"Relogin",customCSS:"w-full",removeOldItem:a.id})]},a.error)})})})]})]})]})},ai=c(3454),aj=c(8428);(0,e.Z)(i().mark(function a(b){var c;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Promise.all(b.map(function(){var a=(0,e.Z)(i().mark(function a(b){var c,d,e,f,g,h,j,k;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:for(console.log(b),c=new Date().getMonth()+1,d=0;c>1;)d+=1,c--;return f=(e=new Date).toISOString().substring(0,10),g=new Date(e.setMonth(e.getMonth()-d)),h=g.toISOString().substring(0,10),a.next=10,fetch("".concat(ai.env.DOMAIN,"/api/transactions/").concat(b.access_token,"/").concat(h,"/").concat(f),{method:"GET",agent:new aj.Agent({rejectUnauthorized:!1})});case 10:return j=a.sent,a.next=13,j.json();case 13:return k=a.sent.transactions,a.prev=14,a.abrupt("return",k);case 18:return a.prev=18,a.t0=a.catch(14),a.abrupt("return",a.t0);case 21:case"end":return a.stop()}},a,null,[[14,18]])}));return function(b){return a.apply(this,arguments)}}()));case 2:return c=a.sent,a.abrupt("return",c);case 4:case"end":return a.stop()}},a)}));var ak,al=c(3454),am=c(8428);(0,e.Z)(i().mark(function a(){var b;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("".concat(al.env.DOMAIN,"/cookie/verify"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},agent:new am.Agent({rejectUnauthorized:!1})});case 2:b=a.sent,console.log(b);case 4:case"end":return a.stop()}},a)})),c(1955),c(3917);var an=!0;function ao(a){var b=a.currentUser;console.log(b);var c=(0,k.useContext)(m.S),d=c.setSignedUser;c.signedUser,(0,k.useContext)(n.q).tab;var h=(0,k.useContext)(v.N).theme,o=(0,k.useContext)(l.c),p=(o.bankAccounts,o.setBankAccounts),q=(0,k.useState)(!0),r=q[0],s=q[1];return d(b),(0,k.useEffect)(function(){if(b){var a;s(!0),(a=(0,e.Z)(i().mark(function a(){var c,d,e,h;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,X(b.userId);case 2:return c=a.sent,a.next=5,Z(c);case 5:return d=a.sent,a.next=8,_(c);case 8:e=a.sent,h=[],d.forEach(function(a){h.push(a)}),e.forEach(function(a){a.accounts&&h.forEach(function(b,c){var d,e;null===(d=a.liabilities)|| void 0===d||null===(e=d.credit)|| void 0===e||e.forEach(function(a){var d,e=null===(d=b.accounts)|| void 0===d?void 0:d.findIndex(function(b){return b.account_id===a.account_id});void 0!==e&&(h[c].accounts[e]=(0,g.Z)((0,f.Z)({},h[c].accounts[e]),{accLiability:a}))})})}),p(h),s(!1);case 14:case"end":return a.stop()}},a)})),function(){return a.apply(this,arguments)})()}},[]),(0,j.jsx)(j.Fragment,{children:r?(0,j.jsx)("div",{className:"fixed inset-0 flex items-center justify-center text-white bg-neutral-900 ",children:(0,j.jsx)("h1",{className:"text-3xl font-bold animate-pulse",children:"Loading your data"})}):(0,j.jsx)("main",{children:(0,j.jsx)("section",{className:"w-full h-screen mx-auto overflow-hidden ".concat("dark"===h?"bg-neutral-900":"bg-white"),children:(0,j.jsxs)("div",{className:"grid w-full h-full grid-cols-6",children:[(0,j.jsxs)("div",{className:"flex flex-col justify-between w-full h-full p-2 rounded-tr-xl ".concat("dark"===h?"bg-neutral-800/50":"bg-white"," rounded-br-xl sm:p-4"),children:[(0,j.jsxs)("h1",{className:"w-full max-w-xs mt-10 ml-auto text-3xl font-semibold text-center text-white ",children:[(0,j.jsx)("span",{className:"hidden lg:block ".concat("dark"===h?"text-white":"text-neutral-900"),children:"Poshly"}),(0,j.jsx)("span",{className:"block lg:hidden ".concat("dark"===h?"text-white":"text-neutral-900"),children:"M"})]}),(0,j.jsx)(w,{}),(0,j.jsx)(C,{})]}),(0,j.jsx)("div",{className:"relative w-full h-full col-span-5 bg-neutral-900 rounded-tl-3xl rounded-bl-3xl removeScrollbar",children:(0,j.jsxs)("div",{className:"relative h-full p-10",children:[(0,j.jsx)(ah,{}),(0,j.jsx)(u,{}),(0,j.jsx)(T,{}),(0,j.jsx)(ae,{})]})})]})})})})}}},function(a){a.O(0,[517,774,888,179],function(){var b;return a(a.s=7005)}),_N_E=a.O()}])