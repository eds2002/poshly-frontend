(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[894],{7005:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/dashboard",function(){return c(3006)}])},2077:function(a,b,c){"use strict";c.d(b,{Z:function(){return e}});var d=c(5893);function e(a){var b=a.text,c=a.customCSS,e=a.icon,f=a.disabled,g=a.setOpenTrackSpending,h=function(){g&&g(!0)};return(0,d.jsxs)("button",{className:"disabled:bg-neutral-500/50 disabled:text-neutral-400 disabled:cursor-default w-full px-4 py-2 text-white bg-red-500 hover:bg-red-500/50 transition rounded-lg ".concat(c),disabled:f,onClick:function(){return h()},children:[e&&e,b]})}},1121:function(a,b,c){"use strict";c.d(b,{Z:function(){return i}});var d=c(6042),e=c(9396),f=c(9534),g=c(5893),h=c(7294);function i(a){var b=a.error,c=a.onChange,i=a.wrongPassword,j=a.id,k=(0,f.Z)(a,["error","onChange","wrongPassword","id"]),l=(0,h.useState)(!1),m=l[0],n=l[1],o=function(a){n(!0)};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("input",(0,e.Z)((0,d.Z)({},k),{className:"\n      w-full basis-full px-4 text-base py-3 my-2 transition rounded-md text-neutral-300 outline-none ".concat(m&&"invalid:bg-red-600/25 invalid:text-red-200 focus:invalid:bg-red-600/25 focus:invalid:text-red-200 valid:bg-neutral-900/65 valid:text-white "," bg-neutral-600/25 focus:bg-neutral-600/75 placeholder:text-white/50 hover:bg-neutral-600/70\n      ").concat(m&&i&&"bg-red-600/25 focus:text-red-200 focus:bg-red-600/25","\n      "),onBlur:o,onChange:c}),j),null!=b&&(0,g.jsx)("p",{className:"text-sm text-red-600 ",children:b})]})}},3006:function(a,b,c){"use strict";c.r(b),c.d(b,{"__N_SSP":function(){return ao},default:function(){return ap}});var d,e,f=c(7568),g=c(6042),h=c(9396),i=c(4051),j=c.n(i),k=c(5893),l=c(7294),m=c(2290),n=c(5208),o=c(6464),p=c(797),q=c(5982),r=c(5159),s=(d=(0,f.Z)(j().mark(function a(){var b,c;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("".concat("https://localhost:3001","/api/create_link_token"),{method:"POST"});case 2:if((b=a.sent).ok){a.next=6;break}return console.log("vro, something is wrong"),a.abrupt("return");case 6:return a.next=8,b.json();case 8:if(!(c=a.sent)){a.next=14;break}if(!(null!=c.error)){a.next=13;break}return console.log("vro something else is wrong",c.error),a.abrupt("return");case 13:localStorage.setItem("link_token",c.link_token);case 14:case"end":return a.stop()}},a)})),function(){return d.apply(this,arguments)});c(8428);var t,u=(e=(0,f.Z)(j().mark(function a(b){var c;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Promise.all(b.map(function(){var a=(0,f.Z)(j().mark(function a(b){var c,d,e,f;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("".concat("https://localhost:3001","/api/liabilities/").concat(b.access_token),{method:"GET"});case 2:return c=a.sent,a.next=5,c.json();case 5:if(e=(d=a.sent).error,f=d.liabilities,!e){a.next=12;break}return a.abrupt("return",e);case 12:return a.abrupt("return",f);case 13:case"end":return a.stop()}},a)}));return function(b){return a.apply(this,arguments)}}()));case 2:return c=a.sent,a.abrupt("return",c);case 4:case"end":return a.stop()}},a)})),function(a){return e.apply(this,arguments)}),v=c(8428),w=(t=(0,f.Z)(j().mark(function a(b){var c;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Promise.all(b.map(function(){var a=(0,f.Z)(j().mark(function a(b){var c,d,e,f,g,h;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("".concat("https://localhost:3001","/api/item/").concat(b.access_token),{method:"GET",agent:new v.Agent({rejectUnauthorized:!1})});case 2:return c=a.sent,a.next=5,fetch("".concat("https://localhost:3001","/api/balance/").concat(b.access_token),{method:"GET"});case 5:return d=a.sent,a.next=8,c.json();case 8:return e=a.sent.institution,a.next=11,d.json();case 11:return g=(f=a.sent).accounts,h=f.error,console.log(h),a.next=17,{id:b.id||null,accessToken:b.access_token||null,institution:e.name||null,accounts:g||null,error:h?h.error_code:null};case 17:return a.abrupt("return",a.sent);case 18:case"end":return a.stop()}},a)}));return function(b){return a.apply(this,arguments)}}()));case 2:return c=a.sent,a.abrupt("return",c);case 4:case"end":return a.stop()}},a)})),function(a){return t.apply(this,arguments)}),x=function(a){var b,c=a.text,d=a.customCSS,e=a.removeOldItem,i=(0,l.useContext)(n.S).signedUser,o=(0,l.useState)(null),p=o[0],t=o[1],v=(0,l.useContext)(m.c),x=(v.item,v.setItem,v.bankAccounts),y=v.setBankAccounts;(0,l.useEffect)(function(){var a=!0;return s(),a&&t(window.localStorage.getItem("link_token")),console.log("infinitelooptest"),function(){a=!1}},[]);var z=(b=(0,f.Z)(j().mark(function a(){var b,c,d,f;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!e){a.next=15;break}return a.next=3,fetch("".concat("https://localhost:3001","/account/delete-item"),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:e})});case 3:return b=a.sent,a.next=6,b.json();case 6:d=(c=a.sent).code,f=c.error,a.t0=d,a.next=200===a.t0?12:14;break;case 12:return B(),a.abrupt("break",14);case 14:return a.abrupt("return");case 15:B();case 16:case"end":return a.stop()}},a)})),function(){return b.apply(this,arguments)}),A=(0,q.usePlaidLink)({token:p,onSuccess:function(a,b){var c;(c=(0,f.Z)(j().mark(function b(){var c,d,e,f,k,l,m,n,o,p,q;return j().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,fetch("".concat("https://localhost:3001","/api/set_access_token"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:"public_token=".concat(a)});case 2:return c=b.sent,b.next=5,c.json();case 5:return d=b.sent,e={userId:i.userId,access_token:d.access_token,item_id:d.item_id},b.next=9,fetch("".concat("https://localhost:3001","/account/create-item"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)});case 9:return f=b.sent,b.next=12,f.json();case 12:l=(k=b.sent).code,m=k.returningId,b.t0=l,b.next=201===b.t0?18:32;break;case 18:return b.next=20,w([e]);case 20:return n=b.sent,b.next=23,u([e]);case 23:return o=b.sent,p=[],n.forEach(function(a){p.push(a)}),o.forEach(function(a){a.accounts&&p.forEach(function(b,c){var d,e;null===(d=a.liabilities)|| void 0===d||null===(e=d.credit)|| void 0===e||e.forEach(function(a){var d,e=null===(d=b.accounts)|| void 0===d?void 0:d.findIndex(function(b){return b.account_id===a.account_id});void 0!==e&&(p[c].accounts[e]=(0,h.Z)((0,g.Z)({},p[c].accounts[e]),{accLiability:a}))})})}),console.log(p),(q=x).push(p[0]),y(q),b.abrupt("break",32);case 32:case"end":return b.stop()}},b)})),function(){return c.apply(this,arguments)})()},onExit:function(a,b){console.log(a),console.log("yo bro pleaseee fix this issue!!!")}}),B=A.open,C=A.ready;return(0,k.jsxs)("button",{onClick:function(){return z()},className:"px-4 py-3 font-medium  transition bg-red-500 rounded-md hover:bg-red-500/75 disabled:bg-gray-500 disabled:text-white flex items-center justify-center gap-x-3\n      ".concat(d,"\n    "),disabled:!C,children:[c,(0,k.jsx)(r.Z,{className:"w-5 h-5"})]})},y=x,z=c(59);function A(a){a.selected;var b,c,d=(0,l.useContext)(m.c),e=d.bankAccounts,i=d.setBankAccounts,n=(d.setTransactions,d.setDisplayTransactions),q=d.setTransactionsId,r=(0,l.useContext)(o.q),s=r.tab,t=r.setTab,u=(b=(0,f.Z)(j().mark(function a(b,c){var d,f,k,l,m,o,r;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return f=(d=new Date).toISOString().substring(0,10),k=new Date(d.setMonth(d.getMonth()-6)),l=k.toISOString().substring(0,10),a.next=6,fetch("".concat("https://localhost:3001","/api/transactions/").concat(b,"/").concat(l,"/").concat(f),{method:"GET"});case 6:return m=a.sent,a.next=9,m.json();case 9:r=(o=a.sent.transactions).filter(function(a){return a.account_id==c}),e.forEach(function(a,b){var d,f=null===(d=a.accounts)|| void 0===d?void 0:d.findIndex(function(a){return a.account_id===c});if(-1!=f&& void 0!==f){var j=(0,p.Z)(e);j[b].accounts[f]=(0,h.Z)((0,g.Z)({},j[b].accounts[f]),{transactions:r}),i(j)}}),q(c),t("Transactions"),n(!0);case 15:case"end":return a.stop()}},a)})),function(a,c){return b.apply(this,arguments)}),v=(c=(0,f.Z)(j().mark(function a(b){var c,d,f,g,h,k;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("".concat("https://localhost:3001","/account/delete/").concat(b),{method:"DELETE",headers:{"Content-type":"application/json; charset=UTF-8"}});case 2:return c=a.sent,a.next=5,c.json();case 5:f=(d=a.sent).code,g=d.message,200===f&&(k=(h=e).filter(function(a){return a.id!=b}),i(k));case 9:case"end":return a.stop()}},a)})),function(a){return c.apply(this,arguments)});return console.log(e),(0,k.jsxs)("div",{className:"absolute inset-0 h-full p-10 bg-neutral-900 ".concat(s," overflow-y-scroll removeScrollbar"),children:[(0,k.jsxs)("div",{className:"w-full mb-24",children:[(0,k.jsx)("h1",{className:"text-4xl font-semibold text-white",children:"Accounts"}),(0,k.jsx)("p",{className:"mt-2 text-neutral-400",children:"View all accounts you have linked with us."})]}),(0,k.jsx)("div",{className:"w-full h-full",children:0==e.length?(0,k.jsx)("div",{className:"w-full h-[80%] flex items-center justify-center flex-col",children:(0,k.jsxs)("div",{className:"flex flex-col items-center justify-center p-6 bg-neutral-800 rounded-xl",children:[(0,k.jsx)("h1",{className:"max-w-xs text-3xl font-medium text-center text-white",children:"Add your first account using Plaid!"}),(0,k.jsx)(y,{customCSS:"text-white mt-4 rounded-xl hover:bg-red-600/50 hover:text-white bg-red-600 shadow-xl",text:"Link your first account"})]})}):(0,k.jsxs)(k.Fragment,{children:[e.map(function(a){return(0,k.jsx)(k.Fragment,{children:a.error&&(0,k.jsxs)("div",{className:"my-24",children:[(0,k.jsx)("p",{className:"mb-2 text-sm font-medium text-neutral-400",children:"Accounts that need extra attention."}),(0,k.jsx)("div",{className:"grid grid-cols-1 gap-16 p-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 bg-neutral-700/10 rounded-xl",children:(0,k.jsxs)("div",{className:"flex flex-col items-start justify-center w-full grid-cols-1 px-4 py-6 transition rounded-lg bg-neutral-800 hover:shadow-md",children:[(0,k.jsx)("h3",{className:"mb-3 text-xl text-neutral-400",children:a.institution}),(0,k.jsxs)("div",{className:"mb-5 text-sm text-neutral-600",children:[(0,k.jsx)("p",{className:"text-neutral-400",children:"This account requires extra attention."}),(0,k.jsxs)("p",{className:"text-xs",children:["Error: ",a.error]})]}),(0,k.jsx)(y,{text:"ITEM_LOGIN_REQUIRED"==a.error&&"Relogin",customCSS:"w-full",removeOldItem:a.id})]},a.error)})]})})}),(0,k.jsxs)("div",{className:"my-24",children:[(0,k.jsx)("p",{className:"mb-2 text-sm font-medium text-neutral-400",children:"Credit Cards"}),(0,k.jsx)("div",{className:"grid grid-cols-1 gap-16 p-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 bg-neutral-700/10 rounded-xl",children:e.map(function(a){return(0,k.jsx)(k.Fragment,{children:!a.error&&(0,k.jsx)(k.Fragment,{children:a.accounts.map(function(b){var c;return(0,k.jsx)(k.Fragment,{children:"credit card"==b.subtype&&(0,k.jsxs)("div",{className:"relative w-full grid-cols-1 px-4 py-6 transition rounded-lg shadow-xl bg-neutral-800",children:[(0,k.jsx)("h1",{className:"text-2xl font-medium text-white",children:b.official_name}),(0,k.jsx)("div",{className:"mt-2",children:(0,k.jsxs)("p",{className:"flex flex-col text-xl text-neutral-400",children:[(0,k.jsx)("span",{className:"text-sm text-gray-200",children:"Total Balance"}),(0,k.jsx)("span",{className:"font-medium text-red-400",children:(null===(c=b.balances)|| void 0===c?void 0:c.current).toLocaleString("en-us",{style:"currency",currency:b.balances.iso_currency_code})})]})}),(0,k.jsx)("button",{className:"w-full px-4 py-2 mt-4 font-medium text-white transition bg-red-500 rounded-lg hover:bg-red-500/75",onClick:function(){return u(a.accessToken,b.account_id)},children:"View Account"}),(0,k.jsx)("div",{className:"absolute right-2 top-2",children:(0,k.jsxs)("div",{className:"relative w-full h-full group",children:[(0,k.jsx)(z.Z,{className:"w-5 h-5 text-red-500 transition cursor-pointer group-hover:text-red-900"}),(0,k.jsx)("div",{className:"absolute right-0 hidden w-40 transition rounded-lg shadow-xl bg-neutral-900 group-hover:block hover:bg-neutral-400",children:(0,k.jsx)("p",{className:"px-4 py-2 text-base font-medium text-white cursor-pointer",onClick:function(){return v(a.id)},children:"Delete this account"})})]})})]},b.account_id)})})})})})})]}),(0,k.jsxs)("div",{className:"my-24",children:[(0,k.jsx)("p",{className:"mb-2 text-sm font-medium text-neutral-400",children:"Checking Accounts"}),(0,k.jsx)("div",{className:"grid grid-cols-1 gap-16 p-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 bg-neutral-700/10 rounded-xl",children:e.map(function(a){return(0,k.jsx)(k.Fragment,{children:!a.error&&(0,k.jsx)(k.Fragment,{children:a.accounts.map(function(b){var c;return(0,k.jsx)(k.Fragment,{children:"checking"==b.subtype&&(0,k.jsxs)("div",{className:"relative w-full grid-cols-1 px-4 py-6 transition rounded-lg shadow-xl bg-neutral-800",children:[(0,k.jsx)("h1",{className:"text-2xl font-medium text-white",children:b.official_name}),(0,k.jsx)("div",{className:"mt-2",children:(0,k.jsxs)("p",{className:"flex flex-col text-xl text-neutral-400",children:[(0,k.jsx)("span",{className:"text-sm text-gray-200",children:"Total Balance"}),(0,k.jsx)("span",{className:"font-medium text-red-400",children:(null===(c=b.balances)|| void 0===c?void 0:c.current).toLocaleString("en-us",{style:"currency",currency:b.balances.iso_currency_code})})]})}),(0,k.jsx)("button",{className:"w-full px-4 py-2 mt-4 font-medium text-white transition bg-red-500 rounded-lg hover:bg-red-500/75",onClick:function(){return u(a.accessToken,b.account_id)},children:"View Account"}),(0,k.jsx)("div",{className:"absolute right-2 top-2",children:(0,k.jsxs)("div",{className:"relative w-full h-full group",children:[(0,k.jsx)(z.Z,{className:"w-5 h-5 text-red-500 transition cursor-pointer group-hover:text-red-900"}),(0,k.jsx)("div",{className:"absolute right-0 hidden w-40 transition rounded-lg shadow-xl bg-neutral-900 group-hover:block hover:bg-neutral-400",children:(0,k.jsx)("p",{className:"px-4 py-2 text-base font-medium text-white cursor-pointer",onClick:function(){return v(a.id)},children:"Delete this account"})})]})})]},b.account_id)})})})})})})]}),(0,k.jsx)(y,{customCSS:"fixed bottom-5 right-5 h-16 rounded-xl w-16 text-white hover:bg-red-600/50 hover:text-white py-4 bg-red-600 shadow-xl"})]})})]})}c(1664);var B=c(7609);function C(){var a=(0,l.useContext)(n.S).signedUser,b=(0,l.useContext)(B.N).theme,c=(0,l.useState)(!1);return c[0],c[1],(0,l.useRef)(),(0,k.jsx)("div",{className:"hidden w-full max-w-xs mt-10 ml-auto ".concat("dark"===b?"bg-neutral-700/20":"bg-neutral-200"," rounded-xl lg:block"),children:(0,k.jsx)("div",{className:"\n       flex relative items-center justify-center flex-col  p-4 transition rounded-lg h-26",children:(0,k.jsxs)("div",{className:"flex flex-col items-center justify-center p-4 rounded-xl",children:[(0,k.jsxs)("div",{className:"flex flex-col xl:flex-row gap-x-2",children:[(0,k.jsx)("h3",{className:"hidden text-xl font-medium ".concat("dark"===b?"text-white":"text-neutral-900"," lg:block sm:text-sm md:text-md lg:text-lg"),children:null==a?void 0:a.firstName}),(0,k.jsx)("h3",{className:"hidden text-xl font-medium ".concat("dark"===b?"text-white":"text-neutral-900"," lg:block sm:text-sm md:text-md lg:text-lg"),children:null==a?void 0:a.lastName})]}),(0,k.jsx)("p",{className:"hidden text-xs ".concat("dark"===b?"text-neutral-300/75":"text-neutral-600/75"," lg:block md:text-sm lg:text-base"),children:null==a?void 0:a.email})]})})})}var D=c(5575),E=c(364),F=c(2659),G=c(104),H=c(1163);function I(){var a,b=(0,H.useRouter)(),c=(0,l.useContext)(o.q),d=c.tab,e=c.setTab,g=c.subLink,h=c.setSublink,i=(0,l.useContext)(B.N).theme,m=[{name:"Overview",func:function(){e("Overview")},icon:(0,k.jsx)(D.Z,{className:"w-7 h-7"})},{name:"Accounts",func:function(){e("Accounts")},icon:(0,k.jsx)(E.Z,{className:"w-7 h-7"})},{name:"Settings",func:function(){e("Settings")},icon:(0,k.jsx)(F.Z,{className:" w-7 h-7"}),subLink:[{name:"Profile",func:function(){h("Profile")},icon:(0,k.jsx)(E.Z,{className:"w-5 sm:h-5"})},]},],n=(a=(0,f.Z)(j().mark(function a(){var c,d;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("".concat("https://localhost:3001","/user/logout"),{method:"GET",credentials:"include"});case 2:return c=a.sent,a.next=5,c.json();case 5:200===(d=a.sent.code)&&b.push("/login");case 7:case"end":return a.stop()}},a)})),function(){return a.apply(this,arguments)});return(0,k.jsxs)("div",{className:"relative w-full h-full max-w-xs mt-8 mb-10 ml-auto lg:mt-0",children:[(0,k.jsx)("nav",{children:m.map(function(a,b){var c;return(0,k.jsx)(k.Fragment,{children:a.name===d?(0,k.jsxs)("li",{className:"items-center justify-center block p-3 my-4 text-base font-medium text-white list-none lg:p-4 lg:items-start rounded-xl ".concat("dark"===i?"bg-neutral-900/50":"bg-neutral-100"," gap-x-3"),children:[(0,k.jsxs)("span",{className:"flex items-center text-red-500 gap-x-3 ",children:[(0,k.jsxs)("span",{className:"mx-auto lg:mx-0",children:[a.icon," "]}),(0,k.jsx)("span",{className:"hidden lg:block",children:a.name})]}),null===(c=a.subLink)|| void 0===c?void 0:c.map(function(a,b){return(0,k.jsxs)("li",{className:"items-center text-sm justify-start py-2 sm:p-3 my-4 flex font-medium list-none lg:p-4 lg:items-start rounded-xl  cursor-pointer gap-x-3 \n                ".concat("dark"===i&&g===a.name?"text-red-500 bg-neutral-800 cursor-auto":"bg-neutral-700/20 ","\n                ").concat("light"===i&&g===a.name?"text-red-500 bg-white cursor-auto":" bg-gray-100  ","\n                "),onClick:a.func,children:[(0,k.jsx)("span",{className:"mx-auto lg:mx-0",children:a.icon})," ",(0,k.jsx)("span",{className:"hidden lg:block",children:a.name})]},b)})]},b):(0,k.jsxs)("li",{onClick:a.func,className:"flex items-center justify-center p-3 my-4 text-base font-medium text-white list-none cursor-pointer lg:justify-start lg:p-4 rounded-xl ".concat("dark"===i?"hover:bg-neutral-900/50":"hover:bg-neutral-100"," gap-x-3"),children:[(0,k.jsx)("p",{className:"mx-auto ".concat("dark"===i?"text-neutral-400":"text-neutral-900"," lg:mx-0"),children:a.icon}),(0,k.jsx)("p",{className:"hidden lg:block ".concat("dark"===i?"text-white":"text-neutral-900"),children:a.name})]})})})}),(0,k.jsxs)("li",{className:"absolute bottom-0 flex items-center justify-start w-full p-4 list-none cursor-pointer rounded-xl ".concat("dark"===i?"hover:text-red-500 text-neutral-200 hover:bg-neutral-900/50":"hover:text-red-500 text-neutral-900 hover:bg-neutral-200"," gap-x-3"),onClick:function(){return n()},children:[(0,k.jsx)(G.Z,{className:"mx-auto w-7 h-7 lg:mx-0"}),(0,k.jsx)("span",{className:"hidden lg:block",children:"Sign out"})]})]})}var J,K=c(5236),L=c(8163),M=c(2077),N=c(4323),O=function(a){var b=a.setTimeframe,c=a.timeframe;a.display;var d=(0,l.useContext)(o.q).tab,e=(0,l.useState)(c),f=e[0],g=e[1],h=(0,l.useState)(!1),i=h[0],j=h[1],m=function(a){j(!i),g(a)};return(0,l.useEffect)(function(){return b(f),function(){}},[f]),(0,l.useEffect)(function(){b("6 months"),g("6 months")},[d]),(0,k.jsxs)("div",{className:"flex flex-wrap w-full gap-3 my-2",children:[(0,k.jsxs)("li",{className:"flex items-center justify-center px-4 py-2 text-xs font-medium text-white list-none transition cursor-pointer sm:text-sm bg-neutral-400/25 rounded-xl hover:bg-neutral-500/50 gap-x-2",onClick:function(){return j(!i)},children:[(0,k.jsx)("p",{className:"flex items-center justify-center gpa-x-3",children:f}),(0,k.jsx)("span",{className:"".concat(i?"rotate-0":"rotate-180"," transition"),children:(0,k.jsx)(N.Z,{className:"w-5 h-5"})})]}),(0,k.jsx)("div",{className:"flex gap-x-3",children:["6 months","12 months","24 months","YTD"].map(function(a,b){return(0,k.jsx)(k.Fragment,{children:a!=f&&(0,k.jsx)("li",{className:"".concat(i?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"," px-4 py-2 text-sm font-medium text-white list-none transition cursor-pointer bg-neutral-800/50 rounded-xl hover:bg-neutral-700"),onClick:function(){return m(a)},children:a})})})})]})},P=function(a){var b=a.transaction,c=a.display,d=a.index,e=function(a){if(a){var b=a.split("-"),c=["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(b[1])-1],d=b[0],e=b[2];return{month:c,year:d,day:e}}},f=function(a){return -1===Math.sign(a)?"checking"!==c.subtype:"checking"===c.subtype};return(0,k.jsxs)("div",{className:"w-full my-6",children:[(0,k.jsxs)("p",{className:"my-2 text-sm font-light text-neutral-600",children:[e(b.date).month," ",e(b.date).day," ",e(b.date).year]}),(0,k.jsxs)("div",{className:"flex-col-reverse items-start gap-y-2 flex sm:items-center sm:justify-between px-4 py-3 ".concat(f(b.amount)?"bg-red-400 bg-opacity-[3%]":"bg-green-200 bg-opacity-[3%]"," rounded-xl"),children:[(0,k.jsx)("h1",{className:"flex-1 text-xs font-medium text-white sm:text-sm",children:b.merchant_name||b.name}),(0,k.jsx)("p",{className:"flex-1 text-right ".concat(f(b.amount)?"text-red-500":"text-green-500"),children:"checking"===c.subtype?(0,k.jsx)(k.Fragment,{children:(-1*b.amount).toLocaleString("en-us",{style:"currency",currency:b.iso_currency_code})}):(0,k.jsx)(k.Fragment,{children:b.amount.toLocaleString("en-us",{style:"currency",currency:b.iso_currency_code})})})]})]},d)},Q=function(a){var b=a.category,c=a.display,d=(0,l.useState)(),e=d[0],f=d[1],g=(0,l.useState)(3),h=g[0],i=g[1],j=function(a){var b=0,c="USD";return a.transactions.forEach(function(a){b+=a.amount,c=a.iso_currency_code}),{total:b,currencyCode:c}};return(0,l.useEffect)(function(){var a=(null==a?void 0:a.languages)&&(null==a?void 0:a.languages.length)?null==a?void 0:a.languages[0]:null==a?void 0:a.language;f(a||"en-us")},[]),(0,k.jsxs)("div",{className:"w-full",children:[(0,k.jsx)("p",{className:"mt-10 text-sm font-medium text-red-400",children:b.category}),(0,k.jsxs)("div",{className:"\n      w-full h-auto p-6 mt-2 bg-neutral-800/20 rounded-xl\n      ".concat(b.transactions.length>3&&"hover:bg-neutral-800/60 cursor-pointer","\n      "),onClick:function(){return b.transactions.length>3&&i(3===h?1e3:3)},children:[(0,k.jsx)("div",{children:(0,k.jsxs)("p",{className:"text-xl font-medium text-neutral-400",children:["Total Spendature:",(0,k.jsxs)("span",{className:"text-white",children:[" ",j(b).total.toLocaleString(e,{style:"currency",currency:j(b).currencyCode})]})]})}),(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"mt-6 text-lg font-medium text-white",children:"View all your expenses:"}),b.transactions.map(function(a,b){return(0,k.jsx)(k.Fragment,{children:b<h&&(0,k.jsx)(P,{display:c,transaction:a,index:b},b)})})]})]})]})},R=(J=(0,f.Z)(j().mark(function a(b,c,d){var e,f,g,h,i,k,l;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return f=(e=new Date).toISOString().substring(0,10),g=new Date(e.setMonth(e.getMonth()-b)),console.log(b),h=g.toISOString().substring(0,10),console.log(h),a.next=8,fetch("".concat("https://localhost:3001","/api/transactions/").concat(c,"/").concat(h,"/").concat(f),{method:"GET"});case 8:return i=a.sent,a.next=11,i.json();case 11:return l=(k=a.sent.transactions).filter(function(a){return a.account_id==d}),a.abrupt("return",l);case 14:case"end":return a.stop()}},a)})),function(a,b,c){return J.apply(this,arguments)}),S=c(3342),T=function(a){var b=a.setSortBy,c=(a.timeframe,a.display),d=(0,l.useState)("Newest to Oldest"),e=d[0],f=d[1],g=(0,l.useState)(!1),h=g[0],i=g[1],j=function(){console.log("work ?"),f("Newest to Oldest"===e?"Oldest to Newest":"Newest to Oldest"),b(e)};return(0,l.useEffect)(function(){return f("Newest to Oldest"),b(e),console.log("infinitelooptest"),function(){}},[c]),(0,k.jsxs)("div",{className:"inline-block text-white list-none bg-red-600 rounded-xl",onClick:function(){return i(!h)},children:[(0,k.jsxs)("li",{className:"flex w-full gap-3 px-4 py-2 text-sm transition cursor-pointer rounded-xl",children:[e,(0,k.jsx)(S.Z,{className:"w-5 h-5"})]}),h&&(0,k.jsx)("div",{className:"rounded-full",children:(0,k.jsx)("li",{className:"flex gap-3 px-4 py-4 text-sm transition cursor-pointer rounded-bl-xl rounded-br-xl bg-red-700/90 hover:bg-red-800/50",onClick:function(){return j()},children:"Newest to Oldest"===e?(0,k.jsx)(k.Fragment,{children:"Oldest to Newest"}):(0,k.jsx)(k.Fragment,{children:"Newest to Oldest"})})})]})},U=function(a){var b,c,d,e=a.display,f=a.setDisplayAmount;return(0,k.jsx)("div",{className:"w-full p-6 my-2 bg-neutral-800/50 rounded-xl gap-y-6",children:(0,k.jsx)("input",{type:"range",className:"w-full bg-gray-500 rounded-lg outline-none appearance-none cursor-pointer range-lg dark:bg-gray-700",step:"0.01",defaultValue:null===(b=e.balances)|| void 0===b?void 0:b.current,min:null===(c=e.accLiability)|| void 0===c?void 0:c.minimum_payment_amount,max:null===(d=e.balances)|| void 0===d?void 0:d.current,onChange:function(a){return f(a.target.value)}})})},V=function(a){var b,c,d,e,f,g,h,i,j,l,m,n,o,p,q,r=a.displayAmount,s=a.userLocale,t=a.display,u=a.penalty,v=function(a){if(a){var b=a.split("-"),c=["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(b[1])-1],d=b[0],e=b[2];return{month:c,year:d,day:e}}};return(0,k.jsxs)("div",{className:"w-full col-span-4 p-6 bg-red-600/70 rounded-xl",children:[(0,k.jsx)("span",{className:"text-base font-medium text-neutral-300",children:r==(null===(b=t.balances)|| void 0===b?void 0:b.current)?"Total Balance":parseInt(r)===(null===(c=t.accLiability)|| void 0===c?void 0:c.minimum_payment_amount)?"Minimum Payment":"Custom Amount"}),(0,k.jsx)("h2",{className:"text-3xl font-medium text-white",children:parseFloat(r).toLocaleString(s,{style:"currency",currency:(null===(d=t.balances)|| void 0===d?void 0:d.iso_currency_code)||"USD"})}),(0,k.jsxs)("p",{className:"flex flex-col items-start justify-start mt-2 mb-4 xl:items-center xl:justify-between xl:flex-row",children:[(0,k.jsx)("span",{className:" text-neutral-300",children:r!=(null===(e=t.balances)|| void 0===e?void 0:e.current)?"Estimated Penalty Charges":"Statement Balance as of ".concat(v(null===(f=t.accLiability)|| void 0===f?void 0:f.last_statement_issue_date).month," ").concat(v(null===(g=t.accLiability)|| void 0===g?void 0:g.last_statement_issue_date).day," ").concat(v(null===(h=t.accLiability)|| void 0===h?void 0:h.last_statement_issue_date).year)}),(0,k.jsx)("span",{className:"text-lg font-medium text-neutral-100 ",children:r!=(null===(i=t.balances)|| void 0===i?void 0:i.current)?parseFloat(u).toLocaleString(s,{style:"currency",currency:(null===(j=t.balances)|| void 0===j?void 0:j.iso_currency_code)||"USD"}):(null===(l=t.accLiability)|| void 0===l?void 0:l.last_statement_balance).toLocaleString(s,{style:"currency",currency:(null===(m=t.balances)|| void 0===m?void 0:m.iso_currency_code)||"USD"})})]}),(0,k.jsxs)("p",{className:"mt-2 text-sm text-neutral-300",children:[(null===(n=t.accLiability)|| void 0===n?void 0:n.minimum_payment_amount).toLocaleString(s,{style:"currency",currency:(null===(o=t.balances)|| void 0===o?void 0:o.iso_currency_code)||"USD"})," minimum payment due on ",v(null===(p=t.accLiability)|| void 0===p?void 0:p.next_payment_due_date).month," ",v(null===(q=t.accLiability)|| void 0===q?void 0:q.next_payment_due_date).day]})]})},W=function(a){var b,c=a.displayAmount,d=a.display,e=a.userLocale;return(0,k.jsxs)("div",{className:"w-full col-span-4 p-6 bg-red-600/70 rounded-xl",children:[(0,k.jsx)("span",{className:"text-base font-medium text-neutral-200",children:"Available balance"}),(0,k.jsx)("h2",{className:"text-2xl font-medium text-white",children:parseFloat(c).toLocaleString(e,{style:"currency",currency:(null===(b=d.balances)|| void 0===b?void 0:b.iso_currency_code)||"USD"})})]})},X=function(a){var b,c=a.display,d=a.timeframe,e=a.userLocale,f=(0,l.useState)(0),g=f[0],h=f[1];return(0,l.useEffect)(function(){return h(0),function(){if(null!=c)switch(d){case"6 months":var a,b=null==c?void 0:null===(a=c.transactions)|| void 0===a?void 0:a.filter(function(a){return -1===Math.sign(a.amount)}),e=0;null==b||b.forEach(function(a){e+=-1*a.amount}),h(e.toFixed(2));break;case"12 months":var f,g=null==c?void 0:null===(f=c.twelveMonthTransactions)|| void 0===f?void 0:f.filter(function(a){return -1===Math.sign(a.amount)}),i=0;null==g||g.forEach(function(a){i+=-1*a.amount}),h(i.toFixed(2));break;case"24 months":var j,k=null==c?void 0:null===(j=c.twentyFourMonthTransactions)|| void 0===j?void 0:j.filter(function(a){return -1===Math.sign(a.amount)}),l=0;null==k||k.forEach(function(a){l+=-1*a.amount}),h(l.toFixed(2));break;case"YTD":var m,n=null==c?void 0:null===(m=c.ytdTransactions)|| void 0===m?void 0:m.filter(function(a){return -1===Math.sign(a.amount)}),o=0;null==n||n.forEach(function(a){o+=-1*a.amount}),h(o.toFixed(2))}}(),console.log("infinitelooptest"),function(){}},[d,c]),(0,k.jsxs)("div",{className:"\n    ".concat("credit card"===c.subtype&&"col-span-4 p-6 bg-indigo-600 rounded-xl xl:col-span-4","\n    ").concat("checking"===c.subtype&&"col-span-4 p-6 bg-indigo-600 rounded-xl xl:col-span-2","\n    "),children:[(0,k.jsx)("span",{className:"text-neutral-300 ",children:"Total earned"}),(0,k.jsx)("p",{className:"text-2xl font-medium text-white",children:parseFloat(g).toLocaleString(e,{style:"currency",currency:(null===(b=c.balances)|| void 0===b?void 0:b.iso_currency_code)||"USD"})}),(0,k.jsxs)("p",{className:"mt-2 text-sm text-neutral-300/75",children:["Within ",(0,k.jsx)("b",{children:d})]})]})},Y=function(a){var b,c=a.display,d=a.timeframe,e=a.userLocale,f=a.setOpenTrackSpending,g=(0,l.useState)(0),h=g[0],i=g[1],j=function(){f(!0)};return(0,l.useEffect)(function(){return i(0),function(){if(null!=c)switch(d){case"6 months":var a,b=null==c?void 0:null===(a=c.transactions)|| void 0===a?void 0:a.filter(function(a){return 1===Math.sign(a.amount)}),e=0;null==b||b.forEach(function(a){e+=-1*a.amount}),i(e.toFixed(2));break;case"12 months":var f,g=null==c?void 0:null===(f=c.twelveMonthTransactions)|| void 0===f?void 0:f.filter(function(a){return 1===Math.sign(a.amount)}),h=0;null==g||g.forEach(function(a){h+=-1*a.amount}),i(h.toFixed(2));break;case"YTD":var j,k=null==c?void 0:null===(j=c.ytdTransactions)|| void 0===j?void 0:j.filter(function(a){return 1===Math.sign(a.amount)}),l=0;null==k||k.forEach(function(a){l+=-1*a.amount}),i(l.toFixed(2));break;case"24 months":var m,n=null==c?void 0:null===(m=c.twentyFourMonthTransactions)|| void 0===m?void 0:m.filter(function(a){return 1===Math.sign(a.amount)}),o=0;null==n||n.forEach(function(a){o+=-1*a.amount}),i(o.toFixed(2))}}(),console.log("infinitelooptest"),function(){}},[d,c]),(0,k.jsxs)("div",{className:"\n      ".concat("credit card"===c.subtype&&"col-span-4 p-6 bg-sky-600 rounded-xl xl:col-span-4 cursor-pointer hover:bg-sky-500 transition","\n      ").concat("checking"===c.subtype&&"col-span-4 p-6 bg-sky-600 rounded-xl xl:col-span-2 cursor-pointer hover:bg-sky-500 transition","\n      "),onClick:function(){return j()},children:[(0,k.jsx)("span",{className:"text-neutral-300 text-",children:"Total Spent"}),(0,k.jsx)("p",{className:"text-2xl font-medium text-white",children:parseFloat(h).toLocaleString(e,{style:"currency",currency:(null===(b=c.balances)|| void 0===b?void 0:b.iso_currency_code)||"USD"})}),(0,k.jsxs)("p",{className:"mt-2 text-sm text-neutral-300/75",children:["Within ",(0,k.jsx)("b",{children:d})]})]})};function Z(){var a,b,c,d,e=(0,l.useContext)(m.c),i=(e.transactions,e.bankAccounts),n=e.transactionsId,q=e.setBankAccounts,r=(0,l.useContext)(o.q),s=r.tab,t=r.setTab,u=(0,l.useState)(0),v=u[0],w=u[1],x=(0,l.useState)(0),y=x[0],z=x[1],A=(0,l.useState)(),B=A[0],C=A[1],D=(0,l.useState)(),E=D[0],F=D[1],G=(0,l.useState)(3);G[0],G[1];var H=(0,l.useState)(!1),I=H[0],J=H[1],M=(0,l.useState)(null),N=M[0],S=M[1],Z=(0,l.useState)("6 months"),$=Z[0],_=Z[1],aa=(0,l.useState)(),ab=aa[0],ac=aa[1];return console.log(i),(0,l.useEffect)(function(){var a;return i.forEach(function(b,c){var d,e,f,g;b.accounts&& -1!=(a=null===(d=b.accounts)|| void 0===d?void 0:d.findIndex(function(a){return a.account_id===n}))&&(S(i[c].accounts[a]),w(null===(f=null===(e=i[c])|| void 0===e?void 0:e.accounts[a])|| void 0===f?void 0:null===(g=f.balances)|| void 0===g?void 0:g.current))}),function(){}},[n]),(0,l.useEffect)(function(){if(null==N?void 0:N.accLiability){if(0===N.accLiability.minimum_payment_amount||v>=(null==N?void 0:null===(a=N.accLiability)|| void 0===a?void 0:a.last_statement_balance)){z(0);return}var a,b,c,d,e,f=(null===(b=N.accLiability)|| void 0===b?void 0:b.aprs.filter(function(a){return"purchase_apr"===a.apr_type}))||29.99;z((((null===(c=f[0])|| void 0===c?void 0:c.apr_percentage)||.2999).toFixed(4)/12*(null===(d=N.balances)|| void 0===d?void 0:d.current)-((null===(e=f[0])|| void 0===e?void 0:e.apr_percentage)||.2999).toFixed(4)/12*v).toFixed(2))}},[v]),(0,l.useEffect)(function(){var a=!0,b=(null==b?void 0:b.languages)&&(null==b?void 0:b.languages.length)?null==b?void 0:b.languages[0]:null==b?void 0:b.language;return a&&C(b||"en-us"),function(){a=!1}},[]),(0,l.useEffect)(function(){var a,b,c,d,e=[];if(null!=N)switch($){case"6 months":null==N||null===(a=N.transactions)|| void 0===a||a.forEach(function(a){if(e.some(function(b){return b.category===a.category[1]})){var b=e.findIndex(function(b){return b.category===a.category[1]});e[b].transactions.push(a),F(e)}else{var c={category:a.category[1]||a.category[0],transactions:[a]};e.push(c),F(e)}});break;case"12 months":null==N||null===(b=N.twelveMonthTransactions)|| void 0===b||b.forEach(function(a){if(e.some(function(b){return b.category===a.category[1]})){var b=e.findIndex(function(b){return b.category===a.category[1]});e[b].transactions.push(a),F(e)}else{var c={category:a.category[1]||a.category[0],transactions:[a]};e.push(c),F(e)}});break;case"24 months":null==N||null===(c=N.twentyFourMonthTransactions)|| void 0===c||c.forEach(function(a){if(e.some(function(b){return b.category===a.category[1]})){var b=e.findIndex(function(b){return b.category===a.category[1]});e[b].transactions.push(a),F(e)}else{var c={category:a.category[1]||a.category[0],transactions:[a]};e.push(c),F(e)}});break;case"YTD":null==N||null===(d=N.ytdTransactions)|| void 0===d||d.forEach(function(a){if(e.some(function(b){return b.category===a.category[1]})){var b=e.findIndex(function(b){return b.category===a.category[1]});e[b].transactions.push(a),F(e)}else{var c={category:a.category[1]||a.category[0],transactions:[a]};e.push(c),F(e)}})}},[N]),(0,l.useEffect)(function(){var a,b,c;switch($){case"6 months":return;case"YTD":i.forEach((a=(0,f.Z)(j().mark(function a(b,c){var d,e,f,k,l,m;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(-1==(e=null===(d=b.accounts)|| void 0===d?void 0:d.findIndex(function(a){return a.account_id===N.account_id}))|| void 0===e)){a.next=6;break}return a.abrupt("return");case 6:if(!i[c].accounts[e].hasOwnProperty("ytdTransactions")){a.next=10;break}return a.abrupt("return");case 10:for(f=new Date().getMonth()+1,k=0;f>1;)k+=1,f--;return a.next=15,R(k,i[c].accessToken,n);case 15:return l=a.sent,(m=(0,p.Z)(i))[c].accounts[e]=(0,h.Z)((0,g.Z)({},m[c].accounts[e]),{ytdTransactions:l}),a.next=20,q(m);case 20:S(i[c].accounts[e]);case 21:case"end":return a.stop()}},a)})),function(b,c){return a.apply(this,arguments)}));break;case"12 months":i.forEach((b=(0,f.Z)(j().mark(function a(b,c){var d,e,f,k;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(-1==(e=null===(d=b.accounts)|| void 0===d?void 0:d.findIndex(function(a){return a.account_id===N.account_id}))|| void 0===e)){a.next=6;break}return a.abrupt("return");case 6:if(!i[c].accounts[e].hasOwnProperty("twelveMonthTransactions")){a.next=10;break}return a.abrupt("return");case 10:return a.next=12,R(12,i[c].accessToken,n);case 12:return f=a.sent,(k=(0,p.Z)(i))[c].accounts[e]=(0,h.Z)((0,g.Z)({},k[c].accounts[e]),{twelveMonthTransactions:f}),a.next=17,q(k);case 17:S(i[c].accounts[e]);case 18:case"end":return a.stop()}},a)})),function(a,c){return b.apply(this,arguments)}));break;case"24 months":i.forEach((c=(0,f.Z)(j().mark(function a(b,c){var d,e,f,k;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(-1==(e=null===(d=b.accounts)|| void 0===d?void 0:d.findIndex(function(a){return a.account_id===N.account_id}))|| void 0===e)){a.next=6;break}return a.abrupt("return");case 6:if(!i[c].accounts[e].hasOwnProperty("twentyFourMonthTransactions")){a.next=10;break}return a.abrupt("return");case 10:return a.next=12,R(24,i[c].accessToken,n);case 12:return f=a.sent,(k=(0,p.Z)(i))[c].accounts[e]=(0,h.Z)((0,g.Z)({},k[c].accounts[e]),{twentyFourMonthTransactions:f}),a.next=17,q(k);case 17:S(i[c].accounts[e]);case 18:case"end":return a.stop()}},a)})),function(a,b){return c.apply(this,arguments)}))}return function(){}},[$]),(0,l.useEffect)(function(){return null!=N&&function(){switch($){case"6 months":if("Newest to Oldest"===ab){var a,b=null==N?void 0:null===(a=N.transactions)|| void 0===a?void 0:a.sort(function(a,b){return new Date(b.date)-new Date(a.date)}),c=N;c.transactions=b,S(c)}else{var d,e=null==N?void 0:null===(d=N.transactions)|| void 0===d?void 0:d.sort(function(a,b){return new Date(a.date)-new Date(b.date)}),f=N;f.transactions=e,S(f)}break;case"YTD":if("Newest to Oldest"===ab){var g,h=null==N?void 0:null===(g=N.ytdTransactions)|| void 0===g?void 0:g.sort(function(a,b){return new Date(b.date)-new Date(a.date)}),i=N;i.transactions=h,S(i)}else{var j,k=null==N?void 0:null===(j=N.ytdTransactions)|| void 0===j?void 0:j.sort(function(a,b){return new Date(a.date)-new Date(b.date)}),l=N;l.transactions=k,S(l)}break;case"12 months":if("Newest to Oldest"===ab){var m,n=null==N?void 0:null===(m=N.twelveMonthTransactions)|| void 0===m?void 0:m.sort(function(a,b){return new Date(b.date)-new Date(a.date)}),o=N;o.transactions=n,S(o)}else{var p,q=null==N?void 0:null===(p=N.twelveMonthTransactions)|| void 0===p?void 0:p.sort(function(a,b){return new Date(a.date)-new Date(b.date)}),r=N;r.transactions=q,S(r)}break;case"24 months":if("Newest to Oldest"===ab){var s,t=null==N?void 0:null===(s=N.twentyFourMonthTransactions)|| void 0===s?void 0:s.sort(function(a,b){return new Date(b.date)-new Date(a.date)}),u=N;u.transactions=t,S(u)}else{var v,w=null==N?void 0:null===(v=N.twentyFourMonthTransactions)|| void 0===v?void 0:v.sort(function(a,b){return new Date(a.date)-new Date(b.date)}),x=N;x.transactions=w,S(x)}}}(),function(){}},[ab,$]),(0,k.jsx)("div",{className:"absolute top-0 bottom-0 left-0 right-0 h-full px-4  rounded-xl bg-neutral-900 ".concat("Transactions"===s?"translate-x-0":"translate-x-full"," transition duration-300 ease-in-out"),children:(0,k.jsx)("div",{className:"grid w-full h-full overflow-y-scroll xl:grid-cols-2 gap-x-6 removeScrollbar",children:null!=N&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"w-full py-10 ",children:[(0,k.jsxs)("h1",{className:"flex items-center justify-start text-2xl font-semibold text-white sm:text-3xl lg:text-4xl gap-x-3",children:[(0,k.jsx)("span",{onClick:function(){return t("View Accounts")},children:(0,k.jsx)(K.Z,{className:"w-12 h-12 text-red-500 transition cursor-pointer hover:text-red-500/75"})}),(0,k.jsx)("span",{className:"text-xl sm:text-3xl lg:text-4xl",children:null==N?void 0:N.official_name})]}),(0,k.jsx)("p",{className:"mt-2 text-neutral-400",children:"View all your most recent transactions."})]}),(0,k.jsxs)("div",{className:"grid w-full grid-cols-4 gap-3 my-2 xl:grid-cols-4 rounded-xl",children:[N.accLiability?(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(V,{display:N,displayAmount:v,userLocale:B,penalty:y})}):(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(W,{displayAmount:v,userLocale:B,display:N})}),"credit card"===N.subtype?(0,k.jsx)(Y,{display:N,timeframe:$,userLocale:B,setOpenTrackSpending:J}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Y,{display:N,timeframe:$,userLocale:B,setOpenTrackSpending:J}),(0,k.jsx)(X,{display:N,timeframe:$,userLocale:B})]})]}),N.accLiability&&(0,k.jsx)(U,{display:N,setDisplayAmount:w}),(0,k.jsxs)("div",{className:"mt-16 mb-2",children:[(0,k.jsx)("p",{className:"mb-2 text-2xl font-semibold text-white",children:"Transactions"}),(0,k.jsx)(T,{setSortBy:ac,timeframe:$,display:N}),(0,k.jsx)(O,{setTimeframe:_,timeframe:$,display:N})]}),(0,k.jsxs)("div",{className:"p-6 mb-10 rounded-xl bg-neutral-800/50",children:[(0,k.jsx)("div",{className:"flex flex-col items-start justify-between gap-6 lg:flex-row"}),"6 months"===$&&(0,k.jsx)(k.Fragment,{children:null===(a=N.transactions)|| void 0===a?void 0:a.map(function(a,b){return(0,k.jsx)(P,{display:N,transaction:a,index:b},b)})}),"YTD"===$&&(0,k.jsx)(k.Fragment,{children:null==N?void 0:null===(b=N.ytdTransactions)|| void 0===b?void 0:b.map(function(a,b){return(0,k.jsx)(P,{display:N,transaction:a,index:b},b)})}),"12 months"===$&&(0,k.jsx)(k.Fragment,{children:null==N?void 0:null===(c=N.twelveMonthTransactions)|| void 0===c?void 0:c.map(function(a,b){return(0,k.jsx)(P,{display:N,transaction:a,index:b},b)})}),"24 months"===$&&(0,k.jsx)(k.Fragment,{children:null==N?void 0:null===(d=N.twentyFourMonthTransactions)|| void 0===d?void 0:d.map(function(a,b){return(0,k.jsx)(P,{display:N,transaction:a,index:b},b)})})]})]}),(0,k.jsx)("div",{className:"xl:bg-black/0  xl:block \n            z-20 ".concat(I?"bg-black/50":"bg-black-0"," transition\n            fixed inset-0 pointer-events-none\n            "),children:(0,k.jsxs)("div",{className:"\n                xl:w-[50%] xl:h-full px-6 rounded-xl xl:block xl:py-6\n                overflow-y-scroll\n                removeScrollbar\n                absolute top-0 right-0 bottom-0  bg-neutral-900 w-[80%] sm:w-[70%] py-24 pointer-events-auto\n                ".concat(I?"translate-x-0 xl:translate-x-0":"translate-x-full xl:translate-x-0","\n                transition\n                "),children:[(0,k.jsx)("div",{className:"absolute top-0 right-0 mt-6 mr-6 text-xl xl:hidden",onClick:function(){return J(!I)},children:(0,k.jsx)(L.Z,{className:"w-8 h-8 text-red-500 transition cursor-pointer hover:text-red-500/50"})}),(0,k.jsx)("h1",{className:"flex items-center justify-start text-2xl font-semibold text-white sm:text-3xl lg:text-4xl gap-x-3",children:"Track your spending"}),(0,k.jsx)("p",{className:"mt-2 text-gray-400",children:"Track all your spendature through categories."}),null==E?void 0:E.map(function(a){return(0,k.jsx)(k.Fragment,{children:"Credit Card"!=a.category&&"Credit"!=a.category&&"Payroll"!=a.category&&"Deposit"!=a.category&&"Withdrawal"!=a.category&&"Refund"!=a.category&&(0,k.jsx)(Q,{category:a,display:N})})})]})})]})})})}var $,_,aa=($=(0,f.Z)(j().mark(function a(b){var c,d,e,f,g;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("".concat("https://localhost:3001","/account/get-items/").concat(b),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return c=a.sent,a.next=5,c.json();case 5:e=(d=a.sent).code,f=d.message,g=d.accounts,a.t0=e,a.next=404===a.t0?12:200===a.t0?13:14;break;case 12:return a.abrupt("return","ERROR: ".concat(f));case 13:return a.abrupt("return",g);case 14:case"end":return a.stop()}},a)})),function(a){return $.apply(this,arguments)}),ab=c(4924),ac=c(9534),ad=c(1121),ae=function(){var a=(0,l.useContext)(n.S).signedUser,b=[{id:1,type:"text",label:"First Name",name:"firstName",placeholder:null==a?void 0:a.firstName},{id:2,type:"text",label:"Last Name",name:"lastName",placeholder:null==a?void 0:a.lastName},{id:3,type:"email",label:"Email",name:"email",placeholder:null==a?void 0:a.email},],c=(0,l.useState)({firstName:"",lastName:"",email:""}),d=c[0],e=c[1],f=function(a){var b=a.target,c=b.name,d=b.value;e(function(a){return(0,h.Z)((0,g.Z)({},a),(0,ab.Z)({},c,d))})};return(0,k.jsxs)("div",{className:"w-full h-auto pb-24",children:[(0,k.jsx)("h1",{className:"text-2xl font-medium text-white",children:"Personal Information"}),(0,k.jsxs)("form",{className:"flex flex-col pb-16 mt-10",children:[b.map(function(a){var b=a.index,c=a.label,d=(0,ac.Z)(a,["index","label"]);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("span",{className:"text-neutral-400",children:c}),(0,l.createElement)(ad.Z,(0,h.Z)((0,g.Z)({},d),{onChange:f,key:b}))]})}),(0,k.jsx)(M.Z,{text:"Save changes",customCSS:"w-40 ml-auto mt-2",disabled:""===d.firstName&&""===d.lastName&&""===d.email||d.firstName===(null==a?void 0:a.firstName)||d.lastName===a.lastName||d.email==a.email|| !(""!=d.email&&d.email.match(/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i))&&void 0})]}),(0,k.jsx)("h1",{className:"text-2xl font-medium text-white",children:"Delete my account"}),(0,k.jsx)("p",{className:"max-w-xl mt-2 text-sm sm:text-base text-neutral-400",children:"We're sad to see you go, but we respect your decision. All of your data will be wiped, this includes, email, your name, and your information with Plaid. "}),(0,k.jsxs)("div",{className:"flex mt-12 gap-x-5",children:[(0,k.jsx)(M.Z,{text:"Disable my account",customCSS:"w-52 px-1 "}),(0,k.jsx)("button",{className:"text-xs text-red-400 sm:text-sm",children:"Delete my account"})]})]})},af=function(){var a=(0,l.useContext)(o.q),b=a.tab,c=a.subLink;return(0,k.jsxs)("div",{className:"absolute top-0 overflow-y-scroll bottom-0 left-0 right-0 h-full p-10 bg-neutral-900 ".concat("Settings"===b?"translate-x-0":"translate-x-full"," transition duration-300 ease-in-out removeScrollbar"),children:[(0,k.jsxs)("div",{className:"w-full",children:[(0,k.jsxs)("h1",{className:"text-4xl font-semibold text-white",children:[c," settings."]}),(0,k.jsx)("p",{className:"mt-2 text-neutral-400",children:"View all your account information. "})]}),(0,k.jsx)("div",{className:"w-full h-full py-24",children:(0,k.jsx)(ae,{})})]})},ag=c(7338),ah=c(9223),ai=function(){var a=(0,l.useContext)(m.c),b=a.bankAccounts;a.setBankAccounts;var c=(0,l.useContext)(n.S).signedUser,d=(0,l.useContext)(o.q).tab,e=(0,l.useState)(),g=e[0],h=e[1],i=(0,l.useState)(),p=i[0],q=i[1],r=(0,l.useState)("en-us"),s=r[0],t=r[1];return(0,l.useEffect)(function(){var a=!0,b=(null==b?void 0:b.languages)&&(null==b?void 0:b.languages.length)?null==b?void 0:b.languages[0]:null==b?void 0:b.language;return a&&t(b||"en-us"),console.log("infinitelooptest"),function(){a=!1}},[]),(0,l.useEffect)(function(){var a;a=0,b.forEach(function(b){var c;null===(c=b.accounts)|| void 0===c||c.map(function(b){"credit card"==b.subtype&&(a+=b.balances.current)})}),q(a)},[b]),(0,l.useEffect)(function(){var a;a=[],b.forEach(function(b){var c;null===(c=b.accounts)|| void 0===c||c.map(function(b){if("credit card"==b.subtype){var c=new Date,d=new Date(b.accLiability.next_payment_due_date);0===b.accLiability.minimum_payment_amount&&d.setMonth(d.getMonth()+1);var e=d.getTime()-c.getTime(),f=e/864e5;if(!(f<0)){var g={account:b,due:b.balances.current,statement:b.accLiability.last_statement_balance-b.accLiability.last_payment_amount,minimumDue:b.accLiability.minimum_payment_amount,daysTillDue:parseInt(f),dueDate:b.accLiability.next_payment_due_date,currencyCode:b.balances.iso_currency_code};a.push(g)}}})}),a.sort(function(a,b){return parseInt(a.daysTillDue)-parseFloat(b.daysTillDue)}),h(a)},[b.length]),(0,l.useEffect)(function(){var a,c=[];(a=(0,f.Z)(j().mark(function a(){return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:b.forEach(function(a){var b;null===(b=a.accounts)|| void 0===b||b.forEach(function(a){c.push(a)})});case 1:case"end":return a.stop()}},a)})),function(){return a.apply(this,arguments)})()},[b.length]),(0,k.jsxs)("div",{className:"absolute inset-0 h-full px-10 py-16 z-20 bg-neutral-900 overflow-y-scroll removeScrollbar ".concat("Overview"===d?"translate-x-0":"translate-x-full"," transition"),children:[(0,k.jsxs)("div",{className:"w-full mb-24",children:[(0,k.jsxs)("h1",{className:"text-2xl font-semibold text-white md:text-3xl xl:text-4xl",children:["Hi, ",c.firstName,"!"]}),(0,k.jsx)("p",{className:"mt-2 text-neutral-400",children:0==b.length?"Welcome to poshly!":"Let's give you a quick overview of your current week."})]}),(0,k.jsxs)("div",{className:"w-full h-full",children:[(0,k.jsxs)("div",{className:"grid grid-cols-6 gap-6 ",children:[(0,k.jsxs)("div",{className:"relative w-full col-span-6 p-6 shadow-xl lg:col-span-2 bg-zinc-800 rounded-xl",children:[(0,k.jsx)(ag.Z,{className:"mb-2 text-white w-14 h-14"}),(0,k.jsx)("h1",{className:"text-3xl font-medium text-white",children:null==p?void 0:p.toLocaleString(s,{style:"currency",currency:"USD"})}),(0,k.jsx)("p",{className:"mt-1 text-sm text-neutral-400",children:"Total credit card debt"})]}),(null==g?void 0:g.length)!=0&&(0,k.jsxs)("div",{className:"relative w-full col-span-6 p-6 shadow-xl lg:col-span-4 bg-zinc-800 rounded-xl",children:[(0,k.jsx)(ah.Z,{className:"mb-2 text-white w-14 h-14"}),(0,k.jsx)("p",{className:"text-xl font-medium text-white",children:(null==g?void 0:g.length)>1?"Debts due:":"A debt is due:"}),(0,k.jsx)("div",{className:"grid w-full grid-cols-1 gap-6 p-4 my-2 sm:grid-cols-2 bg-zinc-900 rounded-xl",children:null==g?void 0:g.map(function(a,b){var c;return(0,k.jsx)(k.Fragment,{children:3!=b&&(0,k.jsx)(k.Fragment,{children:(null==a?void 0:a.due)>0&&(0,k.jsxs)("div",{className:"".concat(0===b?"sm:col-span-2 bg-neutral-500 p-4 rounded-xl":"sm:col-span-1 bg-neutral-600/50 rounded-xl p-4"),children:[(0,k.jsxs)("p",{className:"flex flex-wrap items-center justify-start gap-2 text-xs",children:[(0,k.jsx)("span",{className:"font-medium text-neutral-300",children:a.account.name}),(0,k.jsxs)("span",{className:"text-neutral-300",children:["*",a.account.mask]})]}),(0,k.jsx)("p",{className:"mt-4 text-sm text-neutral-300/75",children:0!=a.minimumDue?"Statement balance":"Total balance"}),(0,k.jsx)("p",{className:"text-2xl font-medium text-white",children:0!=a.minimumDue?null===(c=a.statement)|| void 0===c?void 0:c.toLocaleString(s,{style:"currency",currency:a.currencyCode}):a.due.toLocaleString(s,{style:"currency",currency:a.currencyCode})}),(0,k.jsxs)("p",{className:"mt-4 text-sm text-neutral-300/75",children:[(0,k.jsx)("span",{children:"You have "}),(0,k.jsxs)("span",{className:"font-medium text-white",children:[a.daysTillDue," "]}),(0,k.jsx)("span",{className:"font-medium text-white",children:1===a.daysTillDue?"day ":"days "}),(0,k.jsx)("span",{children:"left to pay this off."})]})]})})})})})]})]}),(0,k.jsxs)("div",{className:"pb-24",children:[(0,k.jsx)("p",{className:"mt-24 mb-2 text-sm font-medium text-neutral-400",children:"Accounts needed extra action."}),(0,k.jsx)("div",{className:"grid grid-cols-1 gap-16 p-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 bg-neutral-700/10 rounded-xl ",children:b.map(function(a){return(0,k.jsx)(k.Fragment,{children:a.error&&(0,k.jsxs)("div",{className:"flex flex-col items-start justify-center w-full grid-cols-1 px-4 py-6 transition rounded-lg bg-neutral-800 hover:shadow-md",children:[(0,k.jsx)("h3",{className:"mb-3 text-xl text-neutral-400",children:a.institution}),(0,k.jsxs)("div",{className:"mb-5 text-sm text-neutral-600",children:[(0,k.jsx)("p",{className:"text-neutral-400",children:"This account requires extra attention."}),(0,k.jsxs)("p",{className:"text-xs",children:["Error: ",a.error]})]}),(0,k.jsx)(y,{text:"ITEM_LOGIN_REQUIRED"==a.error&&"Relogin",customCSS:"w-full",removeOldItem:a.id})]},a.error)})})})]})]})]})},aj=c(3454),ak=c(8428);(0,f.Z)(j().mark(function a(b){var c;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Promise.all(b.map(function(){var a=(0,f.Z)(j().mark(function a(b){var c,d,e,f,g,h,i,k;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:for(console.log(b),c=new Date().getMonth()+1,d=0;c>1;)d+=1,c--;return f=(e=new Date).toISOString().substring(0,10),g=new Date(e.setMonth(e.getMonth()-d)),h=g.toISOString().substring(0,10),a.next=10,fetch("".concat(aj.env.DOMAIN,"/api/transactions/").concat(b.access_token,"/").concat(h,"/").concat(f),{method:"GET",agent:new ak.Agent({rejectUnauthorized:!1})});case 10:return i=a.sent,a.next=13,i.json();case 13:return k=a.sent.transactions,a.prev=14,a.abrupt("return",k);case 18:return a.prev=18,a.t0=a.catch(14),a.abrupt("return",a.t0);case 21:case"end":return a.stop()}},a,null,[[14,18]])}));return function(b){return a.apply(this,arguments)}}()));case 2:return c=a.sent,a.abrupt("return",c);case 4:case"end":return a.stop()}},a)}));var al,am=c(3454),an=c(8428);(0,f.Z)(j().mark(function a(){var b;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("".concat(am.env.DOMAIN,"/cookie/verify"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},agent:new an.Agent({rejectUnauthorized:!1})});case 2:b=a.sent,console.log(b);case 4:case"end":return a.stop()}},a)}));var ao=!0;function ap(a){var b=a.currentUser,c=(0,l.useContext)(n.S),d=c.setSignedUser;c.signedUser;var e=(0,l.useContext)(o.q),i=(e.tab,e.setTab),p=(0,l.useContext)(B.N).theme,q=(0,l.useContext)(m.c),r=(q.bankAccounts,q.setBankAccounts),s=(0,l.useState)(!0),t=s[0],v=s[1];return d(b),(0,l.useEffect)(function(){if(b){var a;v(!0),(a=(0,f.Z)(j().mark(function a(){var c,d,e,f;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,aa(b.userId);case 2:return c=a.sent,a.next=5,w(c);case 5:return d=a.sent,a.next=8,u(c);case 8:e=a.sent,f=[],d.forEach(function(a){f.push(a)}),e.forEach(function(a){a.accounts&&f.forEach(function(b,c){var d,e;null===(d=a.liabilities)|| void 0===d||null===(e=d.credit)|| void 0===e||e.forEach(function(a){var d,e=null===(d=b.accounts)|| void 0===d?void 0:d.findIndex(function(b){return b.account_id===a.account_id});void 0!==e&&(f[c].accounts[e]=(0,h.Z)((0,g.Z)({},f[c].accounts[e]),{accLiability:a}))})})}),r(f),v(!1);case 14:case"end":return a.stop()}},a)})),function(){return a.apply(this,arguments)})()}},[]),(0,k.jsx)(k.Fragment,{children:t?(0,k.jsx)("div",{className:"fixed inset-0 flex items-center justify-center text-white bg-neutral-900 ",children:(0,k.jsx)("h1",{className:"text-3xl font-bold animate-pulse",children:"Loading your data"})}):(0,k.jsx)("main",{className:"fixed inset-0",children:(0,k.jsx)("section",{className:"w-full h-full mx-auto overflow-hidden ".concat("dark"===p?"bg-neutral-900":"bg-white"),children:(0,k.jsxs)("div",{className:"grid w-full h-full grid-cols-6",children:[(0,k.jsxs)("div",{className:"flex flex-col justify-between w-full h-full p-2 rounded-tr-xl ".concat("dark"===p?"bg-neutral-800/50":"bg-white"," rounded-br-xl sm:p-4"),children:[(0,k.jsxs)("h1",{className:"w-full max-w-xs mt-10 ml-auto text-3xl font-semibold text-center text-white",onClick:function(){return i("Overview")},children:[(0,k.jsx)("span",{className:"hidden lg:block ".concat("dark"===p?"text-red-500":"text-neutral-900"),children:"Poshly"}),(0,k.jsx)("span",{className:"block lg:hidden ".concat("dark"===p?"text-red-500":"text-neutral-900"),children:"P"})]}),(0,k.jsx)(C,{}),(0,k.jsx)(I,{})]}),(0,k.jsx)("div",{className:"relative w-full h-full col-span-5 bg-neutral-900 rounded-tl-3xl rounded-bl-3xl removeScrollbar",children:(0,k.jsxs)("div",{className:"relative h-full p-10",children:[(0,k.jsx)(ai,{}),(0,k.jsx)(A,{}),(0,k.jsx)(Z,{}),(0,k.jsx)(af,{})]})})]})})})})}}},function(a){a.O(0,[664,736,774,888,179],function(){var b;return a(a.s=7005)}),_N_E=a.O()}])